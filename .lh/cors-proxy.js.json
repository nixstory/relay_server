{
    "sourceFile": "cors-proxy.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 413,
            "patches": [
                {
                    "date": 1649995788856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1649997449727,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,41 +1,7 @@\n-var express = require('express'),\n-    request = require('request'),\n-    bodyParser = require('body-parser'),\n-    app = express();\n+const express = require('express');\n+const cors = require('cors');\n+const app = express();\n \n-var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-console.log('Using limit: ', myLimit);\n+const corsOption = { origin: \"*\" }\n \n-app.use(bodyParser.json({ limit: myLimit }));\n-\n-app.all('*', function (req, res, next) {\n-\n-    // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n-    res.header(\"Access-Control-Allow-Origin\", \"*\");\n-    res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n-    res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n-\n-    if (req.method === 'OPTIONS') {\n-        // CORS Preflight\n-        res.send();\n-    } else {\n-        var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n-        if (!targetURL) {\n-            res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n-            return;\n-        }\n-        request({ url: targetURL + req.url, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n-            function (error, response, body) {\n-                if (error) {\n-                    console.error('error: ' + response.statusCode)\n-                }\n-                //                console.log(body);\n-            }).pipe(res);\n-    }\n-});\n-\n-app.set('port', process.env.PORT || 3000);\n\\ No newline at end of file\n-\n-app.listen(app.get('port'), function () {\n-    console.log('Proxy server listening on port ' + app.get('port'));\n-});\n+app.use(cors(corsOption));\n"
                },
                {
                    "date": 1649997476183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,41 @@\n-const express = require('express');\n-const cors = require('cors');\n-const app = express();\n+var express = require('express'),\n+    request = require('request'),\n+    bodyParser = require('body-parser'),\n+    app = express();\n \n-const corsOption = { origin: \"*\" }\n+var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n+console.log('Using limit: ', myLimit);\n \n-app.use(cors(corsOption));\n+app.use(bodyParser.json({ limit: myLimit }));\n+\n+app.all('*', function (req, res, next) {\n+\n+    // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n+    res.header(\"Access-Control-Allow-Origin\", \"*\");\n+    res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n+    res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n+\n+    if (req.method === 'OPTIONS') {\n+        // CORS Preflight\n+        res.send();\n+    } else {\n+        var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n+        if (!targetURL) {\n+            res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n+            return;\n+        }\n+        request({ url: targetURL + req.url, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n+            function (error, response, body) {\n+                if (error) {\n+                    console.error('error: ' + response.statusCode)\n+                }\n+                //                console.log(body);\n+            }).pipe(res);\n+    }\n+});\n+\n+app.set('port', process.env.PORT || 3000);\n+\n+app.listen(app.get('port'), function () {\n+    console.log('Proxy server listening on port ' + app.get('port'));\n+});\n\\ No newline at end of file\n"
                },
                {
                    "date": 1649997638085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({ url: targetURL + req.url, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n+        request({ url: targetURL + req.url, method: 'POST', json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + response.statusCode)\n                 }\n"
                },
                {
                    "date": 1649997678561,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n         }\n         request({ url: targetURL + req.url, method: 'POST', json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n             function (error, response, body) {\n                 if (error) {\n-                    console.error('error: ' + response.statusCode)\n+                    console.error('error: ' + error)\n                 }\n                 //                console.log(body);\n             }).pipe(res);\n     }\n"
                },
                {
                    "date": 1649997746828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,8 +14,10 @@\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n \n+    console.log(\"targetURL + req.url : \" + targetURL + req.url);\n+\n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n     } else {\n"
                },
                {
                    "date": 1649997778977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,15 +14,16 @@\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n \n-    console.log(\"targetURL + req.url : \" + targetURL + req.url);\n-\n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n+\n+        console.log(\"targetURL + req.url : \" + targetURL + req.url);\n+\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n"
                },
                {
                    "date": 1649997799984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\"targetURL + req.url : \" + targetURL + req.url);\n+        console.log(\"targetURL : \" + targetURL);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649997805308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({ url: targetURL + req.url, method: 'POST', json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n+        request({ url: targetURL, method: 'POST', json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + error)\n                 }\n"
                },
                {
                    "date": 1649997814783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,9 @@\n         // CORS Preflight\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n+        console.log(\"targetURL : \" + targetURL);\n \n         console.log(\"targetURL : \" + targetURL);\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1649997835684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,12 +19,11 @@\n         // CORS Preflight\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n+        var targetURL = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n         console.log(\"targetURL : \" + targetURL);\n \n-        console.log(\"targetURL : \" + targetURL);\n-\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n"
                },
                {
                    "date": 1649997869846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,10 +19,14 @@\n         // CORS Preflight\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n-        var targetURL = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n+        var contentType = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n+        var requestMethod = req.method;\n+\n         console.log(\"targetURL : \" + targetURL);\n+        console.log(\"contentType : \" + contentType);\n+        console.log(\"requestMethod : \" + requestMethod);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649997885764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({ url: targetURL, method: 'POST', json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n+        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + error)\n                 }\n"
                },
                {
                    "date": 1649997901671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,13 +20,13 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var contentType = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n-        var requestMethod = req.method;\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n-        console.log(\"requestMethod : \" + requestMethod);\n+        console.log(\"req.method : \" + req.method);\n+        console.log(\"req.method : \" + req.method);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649997960713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,10 @@\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n         console.log(\"req.method : \" + req.method);\n-        console.log(\"req.method : \" + req.method);\n+        console.log(\"req.body.dataHeader : \" + req.body.dataHeader);\n+        console.log(\"eq.body.dataBody : \" + req.body.dataBody);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649998068609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,10 +24,10 @@\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n         console.log(\"req.method : \" + req.method);\n-        console.log(\"req.body.dataHeader : \" + req.body.dataHeader);\n-        console.log(\"eq.body.dataBody : \" + req.body.dataBody);\n+        console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n+        console.log(\"req.body.dataBody : \" + req.body.dataBody);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649998140826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,10 +24,8 @@\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n         console.log(\"req.method : \" + req.method);\n-        console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n-        console.log(\"req.body.dataBody : \" + req.body.dataBody);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649998253668,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,11 @@\n-var express = require('express'),\n-    request = require('request'),\n-    bodyParser = require('body-parser'),\n-    app = express();\n+const express = require('express');\n+const request = require('request');\n+const bodyParser = require('body-parser');\n+const cors = require('cors');\n \n+app = express();\n+\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n app.use(bodyParser.json({ limit: myLimit }));\n"
                },
                {
                    "date": 1649998296253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,14 @@\n const request = require('request');\n const bodyParser = require('body-parser');\n const cors = require('cors');\n \n-app = express();\n+const app = express();\n+const corsOptions = {\n+    origin: 'devnewapp.shinhan.com'\n+}\n \n+\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n app.use(bodyParser.json({ limit: myLimit }));\n"
                },
                {
                    "date": 1649998313711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,10 @@\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(bodyParser.json({ limit: myLimit }));\n+// app.use(bodyParser.json({ limit: myLimit }));\n+app.use(cors(corsOptions));\n \n app.all('*', function (req, res, next) {\n \n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n"
                },
                {
                    "date": 1649998346575,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,20 +1,13 @@\n-const express = require('express');\n-const request = require('request');\n-const bodyParser = require('body-parser');\n-const cors = require('cors');\n+var express = require('express'),\n+    request = require('request'),\n+    bodyParser = require('body-parser'),\n+    app = express();\n \n-const app = express();\n-const corsOptions = {\n-    origin: 'devnewapp.shinhan.com'\n-}\n-\n-\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-// app.use(bodyParser.json({ limit: myLimit }));\n-app.use(cors(corsOptions));\n+app.use(bodyParser.json({ limit: myLimit }));\n \n app.all('*', function (req, res, next) {\n \n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n@@ -31,8 +24,10 @@\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n         console.log(\"req.method : \" + req.method);\n+        // console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n+        // console.log(\"req.body.dataBody : \" + req.body.dataBody);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1649999448253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,23 +24,27 @@\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n         console.log(\"req.method : \" + req.method);\n-        // console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n+        console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n         // console.log(\"req.body.dataBody : \" + req.body.dataBody);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n-            function (error, response, body) {\n-                if (error) {\n-                    console.error('error: ' + error)\n-                }\n-                //                console.log(body);\n-            }).pipe(res);\n-    }\n+        request({\n+            url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, httpsAgent: new https.Agent({\n+                rejectUnauthorized: false, //허가되지 않은 인증을 reject하지 않겠다! }\n+\n+                출처: https://yeonfamily.tistory.com/18 [Yeons] },\n+                function(error, response, body) {\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    }\n+                    //                console.log(body);\n+                }).pipe(res);\n+        }\n });\n \n app.set('port', process.env.PORT || 3000);\n \n"
                },
                {
                    "date": 1649999453887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,10 +35,10 @@\n         request({\n             url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, httpsAgent: new https.Agent({\n                 rejectUnauthorized: false, //허가되지 않은 인증을 reject하지 않겠다! }\n \n-                출처: https://yeonfamily.tistory.com/18 [Yeons] },\n-                function(error, response, body) {\n+            },\n+                function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     }\n                     //                console.log(body);\n"
                },
                {
                    "date": 1649999463524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,20 +31,16 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({\n-            url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, httpsAgent: new https.Agent({\n-                rejectUnauthorized: false, //허가되지 않은 인증을 reject하지 않겠다! }\n-\n-            },\n-                function (error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    }\n-                    //                console.log(body);\n-                }).pipe(res);\n-        }\n+        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n+            function (error, response, body) {\n+                if (error) {\n+                    console.error('error: ' + error)\n+                }\n+                //                console.log(body);\n+            }).pipe(res);\n+    }\n });\n \n app.set('port', process.env.PORT || 3000);\n \n"
                },
                {
                    "date": 1649999482656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,16 +31,18 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n-            function (error, response, body) {\n-                if (error) {\n-                    console.error('error: ' + error)\n-                }\n-                //                console.log(body);\n-            }).pipe(res);\n-    }\n+        request({\n+            url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, httpsAgent: new https.Agent({\n+                rejectUnauthorized: false, //허가되지 않은 인증을 reject하지 않겠다! }), },\n+                function(error, response, body) {\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    }\n+                    //                console.log(body);\n+                }).pipe(res);\n+        }\n });\n \n app.set('port', process.env.PORT || 3000);\n \n"
                },
                {
                    "date": 1649999492728,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,16 +33,18 @@\n             return;\n         }\n         request({\n             url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, httpsAgent: new https.Agent({\n-                rejectUnauthorized: false, //허가되지 않은 인증을 reject하지 않겠다! }), },\n-                function(error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    }\n-                    //                console.log(body);\n-                }).pipe(res);\n-        }\n+                rejectUnauthorized: false,\n+            }),\n+        },\n+            function (error, response, body) {\n+                if (error) {\n+                    console.error('error: ' + error)\n+                }\n+                //                console.log(body);\n+            }).pipe(res);\n+    }\n });\n \n app.set('port', process.env.PORT || 3000);\n \n"
                },
                {
                    "date": 1649999534961,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n var express = require('express'),\n     request = require('request'),\n     bodyParser = require('body-parser'),\n-    app = express();\n+    https = require('https')\n+app = express();\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n"
                },
                {
                    "date": 1649999596853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n var express = require('express'),\n     request = require('request'),\n     bodyParser = require('body-parser'),\n-    https = require('https')\n-app = express();\n+    app = express();\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n@@ -32,13 +31,9 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({\n-            url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, httpsAgent: new https.Agent({\n-                rejectUnauthorized: false,\n-            }),\n-        },\n+        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + error)\n                 }\n"
                },
                {
                    "date": 1649999607769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,10 @@\n     request = require('request'),\n     bodyParser = require('body-parser'),\n     app = express();\n \n+process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n+\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n app.use(bodyParser.json({ limit: myLimit }));\n"
                },
                {
                    "date": 1650000545778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,8 @@\n \n app.use(bodyParser.json({ limit: myLimit }));\n \n app.all('*', function (req, res, next) {\n-\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n"
                },
                {
                    "date": 1650002609699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,8 @@\n         var contentType = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"contentType : \" + contentType);\n-        console.log(\"req.method : \" + req.method);\n         console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n         // console.log(\"req.body.dataBody : \" + req.body.dataBody);\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1650002619491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,11 +23,9 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var contentType = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\"targetURL : \" + targetURL);\n-        console.log(\"contentType : \" + contentType);\n-        console.log(\"req.body.dataHeader : \" + req.body.dataHeader.trxCd);\n-        // console.log(\"req.body.dataBody : \" + req.body.dataBody);\n+        console.log(\"전문번호 : \" + req.body.dataHeader.trxCd);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650002643617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,8 @@\n         // CORS Preflight\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n-        var contentType = req.header('Content-Type'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\"targetURL : \" + targetURL);\n         console.log(\"전문번호 : \" + req.body.dataHeader.trxCd);\n \n"
                },
                {
                    "date": 1650002650796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\"targetURL : \" + targetURL);\n-        console.log(\"전문번호 : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650002656358,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\"targetURL : \" + targetURL);\n+        console.log(\">>>>>>>>>> targetURL : \" + targetURL);\n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1650002680757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,11 +21,11 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\">>>>>>>>>> targetURL : \" + targetURL);\n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n \n+\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n"
                },
                {
                    "date": 1650002686126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n \n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1650002696313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [HEAD] : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [BODY] : \" + req.body.dataHeader.trxCd);\n \n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1650002702713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [BODY] : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [HEAD] : \" + req.body.dataHeader);\n+        console.log(\">>>>>>>>>> [BODY] : \" + req.body.dataBody);\n \n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1650002736875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + req.body.dataHeader);\n+        console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.toString(req.body.dataHeader));\n         console.log(\">>>>>>>>>> [BODY] : \" + req.body.dataBody);\n \n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1650002744540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.toString(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [BODY] : \" + req.body.dataBody);\n+        console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.toString(req.body.dataBody));\n \n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1650002807531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.toString(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.toString(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.raw(req.body.dataHeader));\n+        console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.raw(req.body.dataBody));\n \n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1650002863646,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,12 +22,11 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.raw(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.raw(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.json(req.body.dataHeader));\n+        // console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.raw(req.body.dataBody));\n \n-\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n"
                },
                {
                    "date": 1650002912959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + bodyParser.json(req.body.dataHeader));\n-        // console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.raw(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(req.body.dataHeader));\n+        console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.raw(req.body.dataBody));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650002954902,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,11 +21,11 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\">>>>>>>>>> 전문번호 : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [전문번호] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [BODY] : \" + bodyParser.raw(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [BODY] : \" + JSON.stringify(req.body.dataBody));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650002962929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [전문번호] : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [BODY] : \" + JSON.stringify(req.body.dataBody));\n+        console.log(\"[HEAD] : \" + JSON.stringify(req.body.dataHeader));\n+        console.log(\"[BODY] : \" + JSON.stringify(req.body.dataBody));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650002983919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [전문번호] : \" + req.body.dataHeader.trxCd);\n-        console.log(\"[HEAD] : \" + JSON.stringify(req.body.dataHeader));\n-        console.log(\"[BODY] : \" + JSON.stringify(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(req.body.dataHeader));\n+        console.log(\">>>>>>>>>> [BODY] : \" + JSON.stringify(req.body.dataBody));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650003009172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,10 +33,11 @@\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + error)\n+                } else {\n+                    console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(body.dataHeader));\n                 }\n-                //                console.log(body);\n             }).pipe(res);\n     }\n });\n \n"
                },
                {
                    "date": 1650003042545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [전문번호] : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [BODY] : \" + JSON.stringify(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader));\n+        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n@@ -34,9 +34,9 @@\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n-                    console.log(\">>>>>>>>>> [HEAD] : \" + JSON.stringify(body.dataHeader));\n+                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader));\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650003049294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,8 +35,9 @@\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader));\n+                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody));\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650003126676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n             function (error, response, body) {\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n-                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader));\n+                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody));\n                 }\n             }).pipe(res);\n     }\n"
                },
                {
                    "date": 1650003132951,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [전문번호] : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader));\n-        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody));\n+        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n@@ -35,9 +35,9 @@\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody));\n+                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650003377512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\">>>>>>>>>> [전문번호] : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1650003414429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,10 +4,10 @@\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n-var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-console.log('Using limit: ', myLimit);\n+// var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n+// console.log('Using limit: ', myLimit);\n \n app.use(bodyParser.json({ limit: myLimit }));\n \n app.all('*', function (req, res, next) {\n"
                },
                {
                    "date": 1650011375182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,10 +4,10 @@\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n-// var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-// console.log('Using limit: ', myLimit);\n+var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n+console.log('Using limit: ', myLimit);\n \n app.use(bodyParser.json({ limit: myLimit }));\n \n app.all('*', function (req, res, next) {\n"
                },
                {
                    "date": 1650013942995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n             }).pipe(res);\n     }\n });\n \n-app.set('port', process.env.PORT || 3000);\n+app.set('port', process.env.PORT || 4000);\n \n app.listen(app.get('port'), function () {\n     console.log('Proxy server listening on port ' + app.get('port'));\n });\n\\ No newline at end of file\n"
                },
                {
                    "date": 1650502875829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n var express = require('express'),\n     request = require('request'),\n-    bodyParser = require('body-parser'),\n+    session = require('express-session')\n+bodyParser = require('body-parser'),\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n"
                },
                {
                    "date": 1650502903033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,16 @@\n var express = require('express'),\n     request = require('request'),\n-    session = require('express-session')\n-bodyParser = require('body-parser'),\n+    session = require('express-session'),\n+    bodyParser = require('body-parser'),\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(bodyParser.json({ limit: myLimit }));\n+app.use(session(bodyParser.json({ limit: myLimit })));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650502966109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(session(bodyParser.json({ limit: myLimit })));\n+app.use(session({ bodyParser.json({ limit: myLimit }) }));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650503006932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(session({ bodyParser.json({ limit: myLimit }) }));\n+app.use(session({ bodyParser.json({ limit: myLimit }), secret: 'keyboard cat' }));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650503013673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(session({ bodyParser.json({ limit: myLimit }), secret: 'keyboard cat' }));\n+app.use(session({ secret: 'keyboard cat' }));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650503050990,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(session({ secret: 'keyboard cat' }));\n+app.use(bodyParser.json({ limit: myLimit }));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650503150423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,20 @@\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n-app.use(bodyParser.json({ limit: myLimit }));\n+// app.use(bodyParser.json({ limit: myLimit }));\n+app.use(session({\n+    httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n+    secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n+    secret: 'secret key',\t//암호화하는 데 쓰일 키\n+    resave: false,\t//세션을 언제나 저장할지 설정함\n+    saveUninitialized: true,\t//세션이 저장되기 전 uninitialized 상태로 미리 만들어 저장\n+    cookie: {\t//세션 쿠키 설정 (세션 관리 시 클라이언트에 보내는 쿠키)\n+        httpOnly: true,\n+        Secure: true\n+    }\n+}));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650503172426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n-    secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n+    // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n     secret: 'secret key',\t//암호화하는 데 쓰일 키\n     resave: false,\t//세션을 언제나 저장할지 설정함\n     saveUninitialized: true,\t//세션이 저장되기 전 uninitialized 상태로 미리 만들어 저장\n     cookie: {\t//세션 쿠키 설정 (세션 관리 시 클라이언트에 보내는 쿠키)\n"
                },
                {
                    "date": 1650503246606,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n-app.use(session({\n+app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n     secret: 'secret key',\t//암호화하는 데 쓰일 키\n     resave: false,\t//세션을 언제나 저장할지 설정함\n@@ -19,9 +19,9 @@\n     cookie: {\t//세션 쿠키 설정 (세션 관리 시 클라이언트에 보내는 쿠키)\n         httpOnly: true,\n         Secure: true\n     }\n-}));\n+})));\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650503334959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,8 +43,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n+                console.log(response);\n+\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650503340877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,10 +48,10 @@\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n-                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                    // console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650503461368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n+    req.header('set-cookie': SESSION_ID);\n \n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n"
                },
                {
                    "date": 1650503472566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n+var SESSION_ID = '';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n@@ -26,9 +27,9 @@\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n-    req.header('set-cookie': SESSION_ID);\n+    req.header('set-cookie', SESSION_ID);\n \n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n"
                },
                {
                    "date": 1650503510252,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n+                SESSION_ID = response.headers.cookie;\n                 console.log(response);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650503516481,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,19 +36,19 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n+        // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+        // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 SESSION_ID = response.headers.cookie;\n-                console.log(response);\n+                console.log(SESSION_ID);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650503532155,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 SESSION_ID = response.headers.cookie;\n-                console.log(SESSION_ID);\n+                console.log(response);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650503730770,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,10 +45,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                SESSION_ID = response.headers.cookie;\n-                console.log(response);\n+                // SESSION_ID = response.headers.cookie;\n+                console.log(response.headers);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650503933482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n+    cookie = require('cookie'),\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n"
                },
                {
                    "date": 1650503962640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,8 +46,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n+                var cookies = cookie.parse(request.header.cookie);\n+\n                 // SESSION_ID = response.headers.cookie;\n                 console.log(response.headers);\n \n                 if (error) {\n"
                },
                {
                    "date": 1650503978740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-var SESSION_ID = '';\n+var cookies = '';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n@@ -46,11 +46,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                var cookies = cookie.parse(request.header.cookie);\n-\n-                // SESSION_ID = response.headers.cookie;\n+                cookies = cookie.parse(request.header.cookie);\n                 console.log(response.headers);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650504003200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n-    req.header('set-cookie', SESSION_ID);\n+    req.header('set-cookie', cookies);\n \n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n@@ -47,9 +47,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 cookies = cookie.parse(request.header.cookie);\n-                console.log(response.headers);\n+                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650504028641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                cookies = cookie.parse(request.header.cookie);\n+                cookies = cookie.parse(request.headers.cookie);\n                 console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650504096423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,9 @@\n         httpOnly: true,\n         Secure: true\n     }\n })));\n+app.use(cookieParser());\n \n app.all('*', function (req, res, next) {\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n"
                },
                {
                    "date": 1650504141747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n-    cookie = require('cookie'),\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n"
                },
                {
                    "date": 1650504152737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n+    cookieParser = require('cookie-parser'),\n     app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n"
                },
                {
                    "date": 1650504182316,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                cookies = cookie.parse(request.headers.cookie);\n-                console.log(cookies);\n+                // cookies = cookie.parse(request.headers.cookie);\n+                // console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650504214886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                // cookies = cookie.parse(request.headers.cookie);\n-                // console.log(cookies);\n+                console.log(request.headers);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650504227324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                console.log(request.headers);\n+                console.log(response.headers);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650504328915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                console.log(response.headers);\n+                console.log(response.headers.get('set-cookie'));\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650504373766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                console.log(response.headers.get('set-cookie'));\n+                console.log(response.headers.get('set-cookie');\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650504382156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                console.log(response.headers.get('set-cookie');\n+                console.log(response.headers.get('set-cookie'));\n+                console.log(response.headers.get('set-cookie'));\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650506314324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                console.log(response.headers.get('set-cookie'));\n-                console.log(response.headers.get('set-cookie'));\n+                console.log(response.headers);\n+                console.log(response.headers['set-cookie']);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650506355450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                console.log(response.headers);\n-                console.log(response.headers['set-cookie']);\n+                var cookies = response.headers['set-cookie'];\n+                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650506372015,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,10 +38,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-        // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-        // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n+        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650506427044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,10 +53,10 @@\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n-                    // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                    // console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650506470609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 var cookies = response.headers['set-cookie'];\n-                console.log(cookies);\n+                // console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650506485399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,10 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n-                var cookies = response.headers['set-cookie'];\n-                // console.log(cookies);\n+                cookies = response.headers['set-cookie'];\n+                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650506494230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,16 +41,17 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n+        console.log(cookies);\n+\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n-                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650506503131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        console.log(cookies);\n+        console.log(req);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650506568177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        console.log(req);\n+        console.log(req.header);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650506614239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        console.log(req.header);\n+        console.log(JSON.stringify(req.header));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650506644150,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        console.log(JSON.stringify(req.header));\n+        console.log(JSON.stringify(req));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650506660567,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        console.log(JSON.stringify(req));\n+        console.log(req);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650506759935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n     // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n     res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n-    req.header('set-cookie', cookies);\n+    // req.header('set-cookie', cookies);\n \n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n"
                },
                {
                    "date": 1650506778839,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n-        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') }, },\n+        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n \n                 if (error) {\n"
                },
                {
                    "date": 1650507437675,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,11 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n-                cookies = response.headers['set-cookie'];\n+                // cookies = response.headers['set-cookie'];\n+                cookies = cookieParser(response.headers.cookie ||\n+                    '')\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650507442814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,10 +50,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 // cookies = response.headers['set-cookie'];\n-                cookies = cookieParser(response.headers.cookie ||\n-                    '')\n+                cookies = cookieParser(response.headers.cookie || '')\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650507484536,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,8 +51,9 @@\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 // cookies = response.headers['set-cookie'];\n                 cookies = cookieParser(response.headers.cookie || '')\n+                console.log(cookies)\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650507502821,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,10 +56,10 @@\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n-                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                    // console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650507534654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,10 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     cookieParser = require('cookie-parser'),\n-    app = express();\n+    cookie = require('cookie');\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1650507544143,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 // cookies = response.headers['set-cookie'];\n-                cookies = cookieParser(response.headers.cookie || '')\n+                cookies = cookie.parse(response.headers.cookie || '')\n                 console.log(cookies)\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650507640237,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,11 +50,13 @@\n             return;\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n-                // cookies = response.headers['set-cookie'];\n+                cookies = response.headers['set-cookie'];\n+                console.log(cookies);\n+\n                 cookies = cookie.parse(response.headers.cookie || '')\n-                console.log(cookies)\n+                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650507646455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,11 @@\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                cookies = cookie.parse(response.headers.cookie || '')\n-                console.log(cookies);\n+                cookies = response.headers['set-cookie'];\n \n+\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650507663745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,11 @@\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                cookies = response.headers['set-cookie'];\n+                cookies = response.headers.get('set-cookie');\n+                console.log(cookies);\n \n-\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650507700671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n-                console.log(cookies);\n+                console.log(cookies.replace(\"[\", \"\").replace(\"]\", \"\"));\n \n                 cookies = response.headers.get('set-cookie');\n                 console.log(cookies);\n \n"
                },
                {
                    "date": 1650507706972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,8 @@\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies.replace(\"[\", \"\").replace(\"]\", \"\"));\n \n-                cookies = response.headers.get('set-cookie');\n-                console.log(cookies);\n-\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650507737905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n         }\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n-                console.log(cookies.replace(\"[\", \"\").replace(\"]\", \"\"));\n+                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650507763260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        console.log(req);\n+        // console.log(req);\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650507773783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,10 +39,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n+        // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+        // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         // console.log(req);\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1650507973568,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,17 @@\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n var cookies = '';\n console.log('Using limit: ', myLimit);\n \n+var get_cookies = function (request) {\n+    var cookies = {};\n+    request.headers && request.headers.cookie.split(';').forEach(function (cookie) {\n+        var parts = cookie.match(/(.*?)=(.*)$/)\n+        cookies[parts[1].trim()] = (parts[2] || '').trim();\n+    });\n+    return cookies;\n+};\n+\n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n@@ -53,8 +62,10 @@\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n+                cookies = response.headers.g\n+\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650508006082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,10 @@\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                cookies = response.headers.g\n+                cookies = get_cookies(cookies)['JSESSIONID'];\n+                console.log(cookies);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650508034402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,17 +11,8 @@\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n var cookies = '';\n console.log('Using limit: ', myLimit);\n \n-var get_cookies = function (request) {\n-    var cookies = {};\n-    request.headers && request.headers.cookie.split(';').forEach(function (cookie) {\n-        var parts = cookie.match(/(.*?)=(.*)$/)\n-        cookies[parts[1].trim()] = (parts[2] || '').trim();\n-    });\n-    return cookies;\n-};\n-\n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n"
                },
                {
                    "date": 1650508041328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,8 @@\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                cookies = get_cookies(cookies)['JSESSIONID'];\n-                console.log(cookies);\n-\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650511454510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,10 +42,8 @@\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-        // console.log(req);\n-\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n"
                },
                {
                    "date": 1650513116530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-var cookies = '';\n+var jsessionid = '';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n@@ -46,8 +46,9 @@\n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n+\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n                 cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n"
                },
                {
                    "date": 1650513121848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,10 +49,10 @@\n         }\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n             function (error, response, body) {\n-                cookies = response.headers['set-cookie'];\n-                console.log(cookies);\n+                jsessionid = response.headers['set-cookie'];\n+                console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650513157946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n \n-        request({ url: targetURL, method: req.method, json: req.body, headers: { 'Cookie': cookies }, },\n+        request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n                 jsessionid = response.headers['set-cookie'];\n                 console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650513179088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,9 @@\n         }\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n-                jsessionid = response.headers['set-cookie'];\n+                var cookies = response.headers['set-cookie'];\n                 console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650513406322,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,12 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n-    cookieParser = require('cookie-parser'),\n-    cookie = require('cookie');\n-app = express();\n+    setCookie = require('set-cookie-parser'),\n+    // cookieParser = require('cookie-parser'),\n+    // cookie = require('cookie');\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n@@ -50,8 +51,9 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n                 var cookies = response.headers['set-cookie'];\n+\n                 console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650513448955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,12 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n-    setCookie = require('set-cookie-parser'),\n-    // cookieParser = require('cookie-parser'),\n-    // cookie = require('cookie');\n-    app = express();\n+    setCookie = require('set-cookie-parser')\n+// cookieParser = require('cookie-parser'),\n+// cookie = require('cookie');\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n@@ -50,10 +50,14 @@\n         }\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n-                var cookies = response.headers['set-cookie'];\n \n+                // var cookies = response.headers['set-cookie'];\n+                var cookies = setCookie.parse(response, {\n+                    decodeValues: true\n+                });\n+\n                 console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650513458038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,10 @@\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true\n                 });\n \n-                console.log(jsessionid);\n+                cookies.forEach(console.log);\n+                // console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n"
                },
                {
                    "date": 1650513476485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,11 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser')\n-// cookieParser = require('cookie-parser'),\n-// cookie = require('cookie');\n-app = express();\n+cookieParser = require('cookie-parser'),\n+    // cookie = require('cookie');\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1650513483929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,12 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n-    setCookie = require('set-cookie-parser')\n-cookieParser = require('cookie-parser'),\n-    // cookie = require('cookie');\n-    app = express();\n+    setCookie = require('set-cookie-parser'),\n+    cookieParser = require('cookie-parser')\n+// cookie = require('cookie');\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1650513516205,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,10 +55,13 @@\n                 // var cookies = response.headers['set-cookie'];\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true\n                 });\n+                cookies.forEach(console.log);\n \n-                cookies.forEach(console.log);\n+                jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n+\n+\n                 // console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650513527076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,10 +58,10 @@\n                 });\n                 cookies.forEach(console.log);\n \n                 jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n+                console.log(jsessionid);\n \n-\n                 // console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650513579996,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,15 +55,15 @@\n                 // var cookies = response.headers['set-cookie'];\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true\n                 });\n-                cookies.forEach(console.log);\n-\n-                jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 console.log(jsessionid);\n \n+                // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n+                // console.log(jsessionid);\n+\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650513597051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n                 // var cookies = response.headers['set-cookie'];\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true\n                 });\n-                console.log(jsessionid);\n+                console.log(cookies.value);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650513614814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,12 +55,12 @@\n                 // var cookies = response.headers['set-cookie'];\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true\n                 });\n-                console.log(cookies.value);\n+                cookies.forEach(console.log);\n \n-                // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n-                // console.log(jsessionid);\n+                jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n+                console.log(jsessionid);\n \n                 // console.log(jsessionid);\n \n                 if (error) {\n"
                },
                {
                    "date": 1650513621134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,11 +57,9 @@\n                     decodeValues: true\n                 });\n                 cookies.forEach(console.log);\n \n-                jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n-                console.log(jsessionid);\n-\n+                // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n                 if (error) {\n                     console.error('error: ' + error)\n"
                },
                {
                    "date": 1650513669595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,10 @@\n             function (error, response, body) {\n \n                 // var cookies = response.headers['set-cookie'];\n                 var cookies = setCookie.parse(response, {\n-                    decodeValues: true\n+                    decodeValues: true,\n+                    map: true\n                 });\n                 cookies.forEach(console.log);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n"
                },
                {
                    "date": 1650514066863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,10 @@\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true,\n                     map: true\n                 });\n-                cookies.forEach(console.log);\n+                // cookies.forEach(console.log);\n+                console.log(cookies);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650514118926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,11 +56,12 @@\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true,\n                     map: true\n                 });\n-                // cookies.forEach(console.log);\n-                console.log(cookies);\n \n+                var desiredCookie = cookies['session']\n+                console.log(desiredCookie);\n+\n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n                 if (error) {\n"
                },
                {
                    "date": 1650514136339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                     decodeValues: true,\n                     map: true\n                 });\n \n-                var desiredCookie = cookies['session']\n+                var desiredCookie = cookies['JSESSIONID']\n                 console.log(desiredCookie);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650514143633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                     decodeValues: true,\n                     map: true\n                 });\n \n-                var desiredCookie = cookies['JSESSIONID']\n+                var desiredCookie = cookies['value'];\n                 console.log(desiredCookie);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650514158905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                     decodeValues: true,\n                     map: true\n                 });\n \n-                var desiredCookie = cookies['value'];\n+                var desiredCookie = cookies['JSESSIONID'];\n                 console.log(desiredCookie);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650514629735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n \n                 // var cookies = response.headers['set-cookie'];\n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true,\n-                    map: true\n+                    // map: true\n                 });\n \n                 var desiredCookie = cookies['JSESSIONID'];\n                 console.log(desiredCookie);\n"
                },
                {
                    "date": 1650514638757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,8 @@\n                     decodeValues: true,\n                     // map: true\n                 });\n \n-                var desiredCookie = cookies['JSESSIONID'];\n                 console.log(desiredCookie);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650514686443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n-    setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser')\n-// cookie = require('cookie');\n-app = express();\n+    // setCookie = require('set-cookie-parser'),\n+    // cookieParser = require('cookie-parser')\n+    // cookie = require('cookie');\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-var jsessionid = '';\n+var cookie = '';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n@@ -57,9 +57,9 @@\n                     decodeValues: true,\n                     // map: true\n                 });\n \n-                console.log(desiredCookie);\n+                console.log(cookies);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650514699948,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,13 +51,13 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                // var cookies = response.headers['set-cookie'];\n-                var cookies = setCookie.parse(response, {\n-                    decodeValues: true,\n-                    // map: true\n-                });\n+                cookies = response.headers['set-cookie'];\n+                // var cookies = setCookie.parse(response, {\n+                //     decodeValues: true,\n+                //     // map: true\n+                // });\n \n                 console.log(cookies);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n"
                },
                {
                    "date": 1650514708059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-var cookie = '';\n+var cookies = '';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n"
                },
                {
                    "date": 1650514728537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,11 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     // setCookie = require('set-cookie-parser'),\n-    // cookieParser = require('cookie-parser')\n-    // cookie = require('cookie');\n-    app = express();\n+    cookieParser = require('cookie-parser')\n+// cookie = require('cookie');\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1650514773107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,15 +51,12 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                cookies = response.headers['set-cookie'];\n-                // var cookies = setCookie.parse(response, {\n-                //     decodeValues: true,\n-                //     // map: true\n-                // });\n+                // cookies = response.headers['set-cookie'];\n+                cookieParser.\n \n-                console.log(cookies);\n+                    console.log(cookies);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650515105229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,10 +16,10 @@\n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n-    secret: 'secret key',\t//암호화하는 데 쓰일 키\n-    resave: false,\t//세션을 언제나 저장할지 설정함\n+    // secret: 'secret key',\t//암호화하는 데 쓰일 키\n+    resave: true,\t//세션을 언제나 저장할지 설정함\n     saveUninitialized: true,\t//세션이 저장되기 전 uninitialized 상태로 미리 만들어 저장\n     cookie: {\t//세션 쿠키 설정 (세션 관리 시 클라이언트에 보내는 쿠키)\n         httpOnly: true,\n         Secure: true\n"
                },
                {
                    "date": 1650515117330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n     resave: true,\t//세션을 언제나 저장할지 설정함\n     saveUninitialized: true,\t//세션이 저장되기 전 uninitialized 상태로 미리 만들어 저장\n     cookie: {\t//세션 쿠키 설정 (세션 관리 시 클라이언트에 보내는 쿠키)\n         httpOnly: true,\n-        Secure: true\n+        Secure: true,\n     }\n })));\n app.use(cookieParser());\n \n"
                },
                {
                    "date": 1650515126030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,9 @@\n     saveUninitialized: true,\t//세션이 저장되기 전 uninitialized 상태로 미리 만들어 저장\n     cookie: {\t//세션 쿠키 설정 (세션 관리 시 클라이언트에 보내는 쿠키)\n         httpOnly: true,\n         Secure: true,\n+        value: true\n     }\n })));\n app.use(cookieParser());\n \n"
                },
                {
                    "date": 1650515164181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,12 +53,11 @@\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n                 // cookies = response.headers['set-cookie'];\n-                cookieParser.\n+                var jsessionid = cookieParser.JSONCookies(\"value\");\n+                console.log(jsessionid);\n \n-                    console.log(cookies);\n-\n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n                 if (error) {\n"
                },
                {
                    "date": 1650515180180,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n-var cookies = '';\n+var jsessionid = '';\n console.log('Using limit: ', myLimit);\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n"
                },
                {
                    "date": 1650515210671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n                 // cookies = response.headers['set-cookie'];\n-                var jsessionid = cookieParser.JSONCookies(\"value\");\n+                jsessionid = cookieParser.JSONCookie(\"value\");\n                 console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650515238234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,11 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                // cookies = response.headers['set-cookie'];\n+                var cookies = response.headers['set-cookie'];\n+                console.log(cookies);\n+\n                 jsessionid = cookieParser.JSONCookie(\"value\");\n                 console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n"
                },
                {
                    "date": 1650515251858,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n \n                 var cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                jsessionid = cookieParser.JSONCookie(\"value\");\n+                jsessionid = cookieParser.value;\n                 console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650515269003,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n \n                 var cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                jsessionid = cookieParser.value;\n+                jsessionid = cookieParser.JSESSIONID;\n                 console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650515349863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,10 +52,10 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                var cookies = response.headers['set-cookie'];\n-                console.log(cookies);\n+                // var cookies = response.headers['set-cookie'];\n+                // console.log(cookies);\n \n                 jsessionid = cookieParser.JSESSIONID;\n                 console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650515356024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n var express = require('express'),\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n-    // setCookie = require('set-cookie-parser'),\n+    setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser')\n // cookie = require('cookie');\n app = express();\n \n"
                },
                {
                    "date": 1650515371112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,13 +52,18 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n+                var cookies = setCookie.parse(res, {\n+                    decodeValues: true,  // default: true\n+                    map: true           //default: false\n+                });\n+\n                 // var cookies = response.headers['set-cookie'];\n                 // console.log(cookies);\n \n-                jsessionid = cookieParser.JSESSIONID;\n-                console.log(jsessionid);\n+                // jsessionid = cookieParser.JSESSIONID;\n+                // console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n                 // console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650515391707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,8 +57,11 @@\n                     decodeValues: true,  // default: true\n                     map: true           //default: false\n                 });\n \n+                var desiredCookie = cookies['session'];\n+                console.log(desiredCookie);\n+\n                 // var cookies = response.headers['set-cookie'];\n                 // console.log(cookies);\n \n                 // jsessionid = cookieParser.JSESSIONID;\n"
                },
                {
                    "date": 1650515412493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,10 +57,10 @@\n                     decodeValues: true,  // default: true\n                     map: true           //default: false\n                 });\n \n-                var desiredCookie = cookies['session'];\n-                console.log(desiredCookie);\n+                // var desiredCookie = cookies['session'];\n+                console.log(cookies);\n \n                 // var cookies = response.headers['set-cookie'];\n                 // console.log(cookies);\n \n"
                },
                {
                    "date": 1650515466163,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,11 +57,11 @@\n                     decodeValues: true,  // default: true\n                     map: true           //default: false\n                 });\n \n-                // var desiredCookie = cookies['session'];\n-                console.log(cookies);\n \n+                cookies.forEach(console.log);\n+\n                 // var cookies = response.headers['set-cookie'];\n                 // console.log(cookies);\n \n                 // jsessionid = cookieParser.JSESSIONID;\n"
                },
                {
                    "date": 1650515476431,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,12 +54,10 @@\n             function (error, response, body) {\n \n                 var cookies = setCookie.parse(res, {\n                     decodeValues: true,  // default: true\n-                    map: true           //default: false\n                 });\n \n-\n                 cookies.forEach(console.log);\n \n                 // var cookies = response.headers['set-cookie'];\n                 // console.log(cookies);\n"
                },
                {
                    "date": 1650515497030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                var cookies = setCookie.parse(res, {\n+                var cookies = setCookie.parse(response, {\n                     decodeValues: true,  // default: true\n                 });\n \n                 cookies.forEach(console.log);\n"
                },
                {
                    "date": 1650515515909,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,8 +54,9 @@\n             function (error, response, body) {\n \n                 var cookies = setCookie.parse(response, {\n                     decodeValues: true,  // default: true\n+                    map: true\n                 });\n \n                 cookies.forEach(console.log);\n \n"
                },
                {
                    "date": 1650515533134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                     decodeValues: true,  // default: true\n                     map: true\n                 });\n \n-                cookies.forEach(console.log);\n+                console.log(cookies);\n \n                 // var cookies = response.headers['set-cookie'];\n                 // console.log(cookies);\n \n"
                },
                {
                    "date": 1650515851252,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,18 +52,18 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                var cookies = setCookie.parse(response, {\n-                    decodeValues: true,  // default: true\n-                    map: true\n-                });\n+                // var cookies = setCookie.parse(response, {\n+                //     decodeValues: true,  // default: true\n+                //     map: true\n+                // });\n \n+                // console.log(cookies);\n+\n+                var cookies = response.headers['set-cookie'];\n                 console.log(cookies);\n \n-                // var cookies = response.headers['set-cookie'];\n-                // console.log(cookies);\n-\n                 // jsessionid = cookieParser.JSESSIONID;\n                 // console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n"
                },
                {
                    "date": 1650515890232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,8 +60,9 @@\n \n                 // console.log(cookies);\n \n                 var cookies = response.headers['set-cookie'];\n+                const jsessionid = cookies.find((cookie) => cookie.startsWith('value:'))\n                 console.log(cookies);\n \n                 // jsessionid = cookieParser.JSESSIONID;\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650515912947,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,8 +61,9 @@\n                 // console.log(cookies);\n \n                 var cookies = response.headers['set-cookie'];\n                 const jsessionid = cookies.find((cookie) => cookie.startsWith('value:'))\n+                const parsedCookie = cookie.parse(jsessionid)\n                 console.log(cookies);\n \n                 // jsessionid = cookieParser.JSESSIONID;\n                 // console.log(jsessionid);\n"
                },
                {
                    "date": 1650516196380,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,16 @@\n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n var jsessionid = '';\n console.log('Using limit: ', myLimit);\n \n+function getSessionId(response) {\n+    const cookies = setCookie.parse(response.headers['set-cookie'], {\n+        decodeValues: true,\n+        map: true,\n+    });\n+    return cookies['sessionid'] && cookies['sessionid']['value'];\n+}\n+\n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n@@ -59,12 +67,13 @@\n                 // });\n \n                 // console.log(cookies);\n \n-                var cookies = response.headers['set-cookie'];\n-                const jsessionid = cookies.find((cookie) => cookie.startsWith('value:'))\n-                const parsedCookie = cookie.parse(jsessionid)\n-                console.log(cookies);\n+                var cookies = setCookie.parse(response.headers['set-cookie'], {\n+                    decodeValues: true,\n+                    map: true\n+                });\n+                jsessionid = cookies\n \n                 // jsessionid = cookieParser.JSESSIONID;\n                 // console.log(jsessionid);\n \n"
                },
                {
                    "date": 1650516239324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,21 +60,14 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                // var cookies = setCookie.parse(response, {\n-                //     decodeValues: true,  // default: true\n-                //     map: true\n-                // });\n+                var cookies = response.headers['set-cookie'];\n+                console.log(cookies);\n \n-                // console.log(cookies);\n+                jsessionid = getSessionId(response);\n+                console.log(jsessionid);\n \n-                var cookies = setCookie.parse(response.headers['set-cookie'], {\n-                    decodeValues: true,\n-                    map: true\n-                });\n-                jsessionid = cookies\n-\n                 // jsessionid = cookieParser.JSESSIONID;\n                 // console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n"
                },
                {
                    "date": 1650517199663,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n var jsessionid = '';\n-console.log('Using limit: ', myLimit);\n+// console.log('Using limit: ', myLimit);\n \n function getSessionId(response) {\n     const cookies = setCookie.parse(response.headers['set-cookie'], {\n         decodeValues: true,\n"
                },
                {
                    "date": 1650517206997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,11 +8,11 @@\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n-var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n+// var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n+// console.log('Using limit: ', myLimit);\n var jsessionid = '';\n-// console.log('Using limit: ', myLimit);\n \n function getSessionId(response) {\n     const cookies = setCookie.parse(response.headers['set-cookie'], {\n         decodeValues: true,\n"
                },
                {
                    "date": 1650517228698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n     const cookies = setCookie.parse(response.headers['set-cookie'], {\n         decodeValues: true,\n         map: true,\n     });\n-    return cookies['sessionid'] && cookies['sessionid']['value'];\n+    return cookies['JSESSIONID'] && cookies['JSESSIONID']['value'];\n }\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n"
                },
                {
                    "date": 1650517519904,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,11 +60,9 @@\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n-                var cookies = response.headers['set-cookie'];\n-                console.log(cookies);\n-\n+                // var cookies = response.headers['set-cookie'];\n                 jsessionid = getSessionId(response);\n                 console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSESSIONID;\n"
                },
                {
                    "date": 1650517535359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,10 +61,8 @@\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n \n                 // var cookies = response.headers['set-cookie'];\n-                jsessionid = getSessionId(response);\n-                console.log(jsessionid);\n \n                 // jsessionid = cookieParser.JSESSIONID;\n                 // console.log(jsessionid);\n \n@@ -76,8 +74,12 @@\n                 } else {\n                     // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n                     // console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n+\n+                jsessionid = getSessionId(response);\n+                console.log(jsessionid);\n+\n             }).pipe(res);\n     }\n });\n \n"
                },
                {
                    "date": 1650517789979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,10 +76,12 @@\n                     // console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n                 jsessionid = getSessionId(response);\n-                console.log(jsessionid);\n+                if (jsessionid != undefined) {\n+                    console.log(jsessionid);\n \n+                }\n             }).pipe(res);\n     }\n });\n \n"
                },
                {
                    "date": 1650517795538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,16 +71,15 @@\n \n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n-                    // console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                    // console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n                 jsessionid = getSessionId(response);\n                 if (jsessionid != undefined) {\n                     console.log(jsessionid);\n-\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650517907152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,10 +49,10 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-        // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-        // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n+        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1650518729357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,17 +59,10 @@\n         }\n \n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n             function (error, response, body) {\n-\n                 // var cookies = response.headers['set-cookie'];\n \n-                // jsessionid = cookieParser.JSESSIONID;\n-                // console.log(jsessionid);\n-\n-                // jsessionid = cookieParser.JSONCookie(\"JSESSIONID\");\n-                // console.log(jsessionid);\n-\n                 if (error) {\n                     console.error('error: ' + error)\n                 } else {\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1650518748988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,11 @@\n                 }\n \n                 jsessionid = getSessionId(response);\n                 if (jsessionid != undefined) {\n-                    console.log(jsessionid);\n+                    var cookies = response.headers['set-cookie'];\n+                    console.log(cookies);\n+                    // console.log(jsessionid);\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650518912434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,13 +68,16 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n-                jsessionid = getSessionId(response);\n-                if (jsessionid != undefined) {\n-                    var cookies = response.headers['set-cookie'];\n-                    console.log(cookies);\n-                    // console.log(jsessionid);\n+                if (jsessionid == '') {\n+                    jsessionid = getSessionId(response);\n+                    if (jsessionid != undefined) {\n+                        var cookies = response.headers['set-cookie'];\n+                        console.log(cookies);\n+                        // console.log(jsessionid);\n+                    }\n+\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650602687596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,17 +68,16 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n-                if (jsessionid == '') {\n-                    jsessionid = getSessionId(response);\n-                    if (jsessionid != undefined) {\n-                        var cookies = response.headers['set-cookie'];\n-                        console.log(cookies);\n-                        // console.log(jsessionid);\n-                    }\n-\n+                // if (jsessionid == '') {\n+                jsessionid = getSessionId(response);\n+                if (jsessionid != undefined) {\n+                    var cookies = response.headers['set-cookie'];\n+                    console.log(cookies);\n+                    // console.log(jsessionid);\n                 }\n+                // }\n             }).pipe(res);\n     }\n });\n \n"
                },
                {
                    "date": 1650602733692,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,11 +70,11 @@\n                 }\n \n                 // if (jsessionid == '') {\n                 jsessionid = getSessionId(response);\n+                console.log(cookies);\n                 if (jsessionid != undefined) {\n                     var cookies = response.headers['set-cookie'];\n-                    console.log(cookies);\n                     // console.log(jsessionid);\n                 }\n                 // }\n             }).pipe(res);\n"
                },
                {
                    "date": 1650602806627,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,11 +68,14 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n+                var _jsessionid = getSessionId(response);\n+                console.log(jsessionid);\n+\n+\n                 // if (jsessionid == '') {\n                 jsessionid = getSessionId(response);\n-                console.log(cookies);\n                 if (jsessionid != undefined) {\n                     var cookies = response.headers['set-cookie'];\n                     // console.log(jsessionid);\n                 }\n"
                },
                {
                    "date": 1650602843924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,11 +69,13 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n                 var _jsessionid = getSessionId(response);\n-                console.log(jsessionid);\n+                if (_jsessionid != undefined) {\n \n+                }\n \n+\n                 // if (jsessionid == '') {\n                 jsessionid = getSessionId(response);\n                 if (jsessionid != undefined) {\n                     var cookies = response.headers['set-cookie'];\n"
                },
                {
                    "date": 1650602873787,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,19 +70,12 @@\n                 }\n \n                 var _jsessionid = getSessionId(response);\n                 if (_jsessionid != undefined) {\n-\n+                    jsessionid = _jsessionid;\n+                    // var cookies = response.headers['set-cookie'];\n+                    console.log(jsessionid);\n                 }\n-\n-\n-                // if (jsessionid == '') {\n-                jsessionid = getSessionId(response);\n-                if (jsessionid != undefined) {\n-                    var cookies = response.headers['set-cookie'];\n-                    // console.log(jsessionid);\n-                }\n-                // }\n             }).pipe(res);\n     }\n });\n \n"
                },
                {
                    "date": 1650602925668,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,8 +69,9 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n                 var _jsessionid = getSessionId(response);\n+                console.log(jsessionid);\n                 if (_jsessionid != undefined) {\n                     jsessionid = _jsessionid;\n                     // var cookies = response.headers['set-cookie'];\n                     console.log(jsessionid);\n"
                },
                {
                    "date": 1650602938439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n                 var _jsessionid = getSessionId(response);\n-                console.log(jsessionid);\n+                console.log('_jsessionid : ' + _jsessionid);\n                 if (_jsessionid != undefined) {\n                     jsessionid = _jsessionid;\n                     // var cookies = response.headers['set-cookie'];\n                     console.log(jsessionid);\n"
                },
                {
                    "date": 1650602957510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,9 @@\n                 console.log('_jsessionid : ' + _jsessionid);\n                 if (_jsessionid != undefined) {\n                     jsessionid = _jsessionid;\n                     // var cookies = response.headers['set-cookie'];\n-                    console.log(jsessionid);\n+                    console.log('jsessionid : ' + jsessionid);\n                 }\n             }).pipe(res);\n     }\n });\n"
                },
                {
                    "date": 1650603625152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,8 @@\n                     console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                 }\n \n                 var _jsessionid = getSessionId(response);\n-                console.log('_jsessionid : ' + _jsessionid);\n                 if (_jsessionid != undefined) {\n                     jsessionid = _jsessionid;\n                     // var cookies = response.headers['set-cookie'];\n                     console.log('jsessionid : ' + jsessionid);\n"
                },
                {
                    "date": 1652668288082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,13 +13,22 @@\n // console.log('Using limit: ', myLimit);\n var jsessionid = '';\n \n function getSessionId(response) {\n-    const cookies = setCookie.parse(response.headers['set-cookie'], {\n-        decodeValues: true,\n-        map: true,\n-    });\n-    return cookies['JSESSIONID'] && cookies['JSESSIONID']['value'];\n+    // const cookies = setCookie.parse(response.headers['set-cookie'], {\n+    //     decodeValues: true,\n+    //     map: true,\n+    // });\n+    // return cookies['JSESSIONID'] && cookies['JSESSIONID']['value'];\n+    if (response.headers != undefined) {\n+        const cookies = setCookie.parse(response.headers['set-cookie'], {\n+            decodeValues: true,\n+            map: true,\n+        });\n+        return cookies['JSESSIONID'] && cookies['JSESSIONID']['value'];\n+    } else {\n+        return \"\";\n+    }\n }\n \n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n"
                },
                {
                    "date": 1653978087724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     //     decodeValues: true,\n     //     map: true,\n     // });\n     // return cookies['JSESSIONID'] && cookies['JSESSIONID']['value'];\n-    if (response.headers != undefined) {\n+    if ((response.headers != null) && (response.headers != undefined)) {\n         const cookies = setCookie.parse(response.headers['set-cookie'], {\n             decodeValues: true,\n             map: true,\n         });\n"
                },
                {
                    "date": 1653978094222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,6 +90,6 @@\n \n app.set('port', process.env.PORT || 4000);\n \n app.listen(app.get('port'), function () {\n-    console.log('Proxy server listening on port ' + app.get('port'));\n+    console.log('########## Proxy server listening on port ' + app.get('port'));\n });\n\\ No newline at end of file\n"
                },
                {
                    "date": 1653983836601,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        // console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1653983877598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        // console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1656311949888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        // console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1656312263254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n-        // console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1659591759775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,8 +57,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n+        console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n"
                },
                {
                    "date": 1659591792439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,11 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n-        console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        if (req.body.dataHeader.trxCd != null) {\n+            console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        }\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n"
                },
                {
                    "date": 1659591852365,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,10 +58,15 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n-        if (req.body.dataHeader.trxCd != null) {\n-            console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+        try {\n+            if (req.body.dataHeader.trxCd != null) {\n+                console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+            }\n+\n+        } catch {\n+\n         }\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n"
                },
                {
                    "date": 1659591874932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,11 +62,10 @@\n         try {\n             if (req.body.dataHeader.trxCd != null) {\n                 console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             }\n-\n-        } catch {\n-\n+        } catch (e) {\n+            console.log(e)\n         }\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n"
                },
                {
                    "date": 1659591880894,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n             if (req.body.dataHeader.trxCd != null) {\n                 console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             }\n         } catch (e) {\n-            console.log(e)\n+            console.log(e);\n         }\n         console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n         console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n"
                },
                {
                    "date": 1659591915130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,9 +59,9 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         try {\n-            if (req.body.dataHeader.trxCd != null) {\n+            if (req.body.dataHeader.trxCd != undefined) {\n                 console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             }\n         } catch (e) {\n             console.log(e);\n"
                },
                {
                    "date": 1659591925123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,16 +59,16 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         try {\n-            if (req.body.dataHeader.trxCd != undefined) {\n-                console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-            }\n+            // if (req.body.dataHeader.trxCd != undefined) {\n+            // }\n+            console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+            console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+            console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n         } catch (e) {\n             console.log(e);\n         }\n-        console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-        console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1659591943673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,11 +61,11 @@\n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         try {\n             // if (req.body.dataHeader.trxCd != undefined) {\n             // }\n-            console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-            console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-            console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n+            // console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+            // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+            // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n         } catch (e) {\n             console.log(e);\n         }\n \n"
                },
                {
                    "date": 1659592609601,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,11 +61,11 @@\n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         try {\n             // if (req.body.dataHeader.trxCd != undefined) {\n             // }\n-            // console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n-            // console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n-            // console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n+            console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n+            console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n+            console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n         } catch (e) {\n             console.log(e);\n         }\n \n"
                },
                {
                    "date": 1659592668630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,10 +59,8 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         try {\n-            // if (req.body.dataHeader.trxCd != undefined) {\n-            // }\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n         } catch (e) {\n"
                },
                {
                    "date": 1659592759822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,8 +56,9 @@\n         // CORS Preflight\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n+        var authorization = req.header('authorization');\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         try {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n"
                },
                {
                    "date": 1659592773225,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,8 +59,9 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var authorization = req.header('authorization');\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n+        console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n         try {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659592805614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,9 @@\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n \n-        request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n+        request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n             function (error, response, body) {\n                 // var cookies = response.headers['set-cookie'];\n \n                 if (error) {\n"
                },
                {
                    "date": 1659681367964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,11 +57,14 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var authorization = req.header('authorization');\n+        var ServiceType = req.header('Service-URL');\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n-        console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n+        if (ServiceType == \"DLS\") {\n+            console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n+        }\n         try {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659681397274,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,15 +62,13 @@\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n-        }\n-        try {\n+        } else if (ServiceType == \"AVATA\") {\n+        } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n-        } catch (e) {\n-            console.log(e);\n         }\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n"
                },
                {
                    "date": 1659681408004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,8 +59,13 @@\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var authorization = req.header('authorization');\n         var ServiceType = req.header('Service-URL');\n \n+        if (!targetURL) {\n+            res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n+            return;\n+        }\n+\n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n         } else if (ServiceType == \"AVATA\") {\n@@ -69,13 +74,8 @@\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n         }\n \n-        if (!targetURL) {\n-            res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n-            return;\n-        }\n-\n         request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n             function (error, response, body) {\n                 // var cookies = response.headers['set-cookie'];\n \n"
                },
                {
                    "date": 1659681426283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,28 +72,29 @@\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n-        }\n \n-        request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n-            function (error, response, body) {\n-                // var cookies = response.headers['set-cookie'];\n+            request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n+                function (error, response, body) {\n+                    // var cookies = response.headers['set-cookie'];\n \n-                if (error) {\n-                    console.error('error: ' + error)\n-                } else {\n-                    console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                    console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n-                }\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                        console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    }\n \n-                var _jsessionid = getSessionId(response);\n-                if (_jsessionid != undefined) {\n-                    jsessionid = _jsessionid;\n-                    // var cookies = response.headers['set-cookie'];\n-                    console.log('jsessionid : ' + jsessionid);\n-                }\n-            }).pipe(res);\n+                    var _jsessionid = getSessionId(response);\n+                    if (_jsessionid != undefined) {\n+                        jsessionid = _jsessionid;\n+                        // var cookies = response.headers['set-cookie'];\n+                        console.log('jsessionid : ' + jsessionid);\n+                    }\n+                }).pipe(res);\n+        }\n+\n     }\n });\n \n app.set('port', process.env.PORT || 4000);\n"
                },
                {
                    "date": 1659681435068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,27 @@\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n+\n+            request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n+                function (error, response, body) {\n+                    // var cookies = response.headers['set-cookie'];\n+\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                        console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    }\n+\n+                    var _jsessionid = getSessionId(response);\n+                    if (_jsessionid != undefined) {\n+                        jsessionid = _jsessionid;\n+                        // var cookies = response.headers['set-cookie'];\n+                        console.log('jsessionid : ' + jsessionid);\n+                    }\n+                }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n@@ -92,9 +111,8 @@\n                         console.log('jsessionid : ' + jsessionid);\n                     }\n                 }).pipe(res);\n         }\n-\n     }\n });\n \n app.set('port', process.env.PORT || 4000);\n"
                },
                {
                    "date": 1659681451565,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,9 +68,9 @@\n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n \n-            request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n+            request({ url: targetURL, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n                 function (error, response, body) {\n                     // var cookies = response.headers['set-cookie'];\n \n                     if (error) {\n@@ -92,9 +92,9 @@\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-            request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid, 'authorization': authorization }, },\n+            request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n                 function (error, response, body) {\n                     // var cookies = response.headers['set-cookie'];\n \n                     if (error) {\n"
                },
                {
                    "date": 1659681466024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,8 +87,26 @@\n                         console.log('jsessionid : ' + jsessionid);\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n+            request({ url: targetURL, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n+                function (error, response, body) {\n+                    // var cookies = response.headers['set-cookie'];\n+\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n+                        console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                    }\n+\n+                    var _jsessionid = getSessionId(response);\n+                    if (_jsessionid != undefined) {\n+                        jsessionid = _jsessionid;\n+                        // var cookies = response.headers['set-cookie'];\n+                        console.log('jsessionid : ' + jsessionid);\n+                    }\n+                }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659681475446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n                         console.log('jsessionid : ' + jsessionid);\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n-            request({ url: targetURL, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n+            request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     // var cookies = response.headers['set-cookie'];\n \n                     if (error) {\n"
                },
                {
                    "date": 1659681485415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,15 +78,8 @@\n                     } else {\n                         console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n                         console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n                     }\n-\n-                    var _jsessionid = getSessionId(response);\n-                    if (_jsessionid != undefined) {\n-                        jsessionid = _jsessionid;\n-                        // var cookies = response.headers['set-cookie'];\n-                        console.log('jsessionid : ' + jsessionid);\n-                    }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659681491628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,10 +70,8 @@\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n                 function (error, response, body) {\n-                    // var cookies = response.headers['set-cookie'];\n-\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n                         console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n@@ -82,10 +80,8 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n-                    // var cookies = response.headers['set-cookie'];\n-\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n                         console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1659681520963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,18 +83,10 @@\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n-                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                        console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body, null, 4));\n                     }\n-\n-                    var _jsessionid = getSessionId(response);\n-                    if (_jsessionid != undefined) {\n-                        jsessionid = _jsessionid;\n-                        // var cookies = response.headers['set-cookie'];\n-                        console.log('jsessionid : ' + jsessionid);\n-                    }\n                 }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1659681531174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,19 +73,18 @@\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n-                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body.dataHeader, null, 4));\n-                        console.log(\">>>>>>>>>> [RESPONSE/BODY] : \" + JSON.stringify(body.dataBody, null, 4));\n+                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n-                        console.log(\">>>>>>>>>> [RESPONSE/HEAD] : \" + JSON.stringify(body, null, 4));\n+                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n"
                },
                {
                    "date": 1659681764587,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,8 +65,10 @@\n             return;\n         }\n \n         console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n+        console.log(\">>>>>>>>>> [ServiceType] : \" + ServiceType);\n+\n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n"
                },
                {
                    "date": 1659681887678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n         res.send();\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var authorization = req.header('authorization');\n-        var ServiceType = req.header('Service-URL');\n+        var ServiceType = req.header('Service-Type');\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1659682096806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,8 +79,10 @@\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n+            console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n+\n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659682109492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,9 +79,9 @@\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n-            console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n+            console.log(\">>>>>>>>>> [req.body] : \" + req.body);\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659682162371,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,9 +79,9 @@\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n-            console.log(\">>>>>>>>>> [req.body] : \" + req.body);\n+            console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659682447967,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,8 +80,11 @@\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n+            var form = new FormData();\n+            form.append(\"client_id\", req.body.client_id);\n+            form.append(\"client_id\", req.body.client_id);\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659682462650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,9 +82,9 @@\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n             var form = new FormData();\n             form.append(\"client_id\", req.body.client_id);\n-            form.append(\"client_id\", req.body.client_id);\n+            form.append(\"client_secret\", req.body.client_secret);\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659682507729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,12 +80,15 @@\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n+\n             var form = new FormData();\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n+            // var boundary = form.getBoundary();\n+\n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659682579462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,15 @@\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n             // var boundary = form.getBoundary();\n+            var options = {\n+                uri: 'https://www.googleapis.com/urlshortener/v1/url',\n+                method: 'POST',\n+                json: {\n+                    \"longUrl\": \"http://www.google.com/\"\n+                }\n+            };\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659682591181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n             form.append(\"client_secret\", req.body.client_secret);\n \n             // var boundary = form.getBoundary();\n             var options = {\n-                uri: 'https://www.googleapis.com/urlshortener/v1/url',\n+                uri: targetURL,\n                 method: 'POST',\n                 json: {\n                     \"longUrl\": \"http://www.google.com/\"\n                 }\n"
                },
                {
                    "date": 1659682621214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,15 +86,15 @@\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n             // var boundary = form.getBoundary();\n-            var options = {\n-                uri: targetURL,\n-                method: 'POST',\n-                json: {\n-                    \"longUrl\": \"http://www.google.com/\"\n-                }\n-            };\n+            // var options = {\n+            //     uri: targetURL,\n+            //     method: 'POST',\n+            //     json: {\n+            //         \"longUrl\": \"http://www.google.com/\"\n+            //     }\n+            // };\n \n             request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659682632434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n             //         \"longUrl\": \"http://www.google.com/\"\n             //     }\n             // };\n \n-            request({ url: targetURL, method: req.method, json: req.body, headers: {}, },\n+            request({ url: targetURL, method: req.method, form: form, headers: {}, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n"
                },
                {
                    "date": 1659682642705,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n             //         \"longUrl\": \"http://www.google.com/\"\n             //     }\n             // };\n \n-            request({ url: targetURL, method: req.method, form: form, headers: {}, },\n+            request({ url: targetURL, method: req.method, form: form, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n"
                },
                {
                    "date": 1659682723089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n             //         \"longUrl\": \"http://www.google.com/\"\n             //     }\n             // };\n \n-            request({ url: targetURL, method: req.method, form: form, },\n+            request({ url: targetURL, method: req.method, body: payload, headers: { \"Content-Type\": \"multipart/form-data; boundary=\" + boundary }, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n"
                },
                {
                    "date": 1659682729521,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,9 +85,9 @@\n             var form = new FormData();\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n-            // var boundary = form.getBoundary();\n+            var boundary = form.getBoundary();\n             // var options = {\n             //     uri: targetURL,\n             //     method: 'POST',\n             //     json: {\n"
                },
                {
                    "date": 1659682766660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,16 +85,14 @@\n             var form = new FormData();\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n-            var boundary = form.getBoundary();\n-            // var options = {\n-            //     uri: targetURL,\n-            //     method: 'POST',\n-            //     json: {\n-            //         \"longUrl\": \"http://www.google.com/\"\n-            //     }\n-            // };\n+            // var boundary = form.getBoundary();\n+            var payload = Buffer.concat([\n+                Buffer.from(data, \"utf8\"),\n+                new Buffer(content, 'binary'),\n+                Buffer.from(\"\\r\\n--\" + boundary + \"--\\r\\n\", \"utf8\"),\n+            ]);\n \n             request({ url: targetURL, method: req.method, body: payload, headers: { \"Content-Type\": \"multipart/form-data; boundary=\" + boundary }, },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659683054372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,10 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser')\n+    cookieParser = require('cookie-parser'),\n+    FormData = require('form-data')\n // cookie = require('cookie');\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659683127814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,15 +86,8 @@\n             var form = new FormData();\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n-            // var boundary = form.getBoundary();\n-            var payload = Buffer.concat([\n-                Buffer.from(data, \"utf8\"),\n-                new Buffer(content, 'binary'),\n-                Buffer.from(\"\\r\\n--\" + boundary + \"--\\r\\n\", \"utf8\"),\n-            ]);\n-\n             request({ url: targetURL, method: req.method, body: payload, headers: { \"Content-Type\": \"multipart/form-data; boundary=\" + boundary }, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659683142451,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,16 +86,18 @@\n             var form = new FormData();\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n-            request({ url: targetURL, method: req.method, body: payload, headers: { \"Content-Type\": \"multipart/form-data; boundary=\" + boundary }, },\n-                function (error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    } else {\n-                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-                    }\n-                }).pipe(res);\n+            request({\n+                url: targetURL, method: req.method, body: form, headers: {\n+                    \"Content-Type\": \"multipart/form-data }, },\n+                function(error, response, body) {\n+                        if (error) {\n+                            console.error('error: ' + error)\n+                        } else {\n+                            console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                        }\n+                    }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659683229336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,16 +88,18 @@\n             form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, body: form, headers: {\n-                    \"Content-Type\": \"multipart/form-data }, },\n-                function(error, response, body) {\n-                        if (error) {\n-                            console.error('error: ' + error)\n-                        } else {\n-                            console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-                        }\n-                    }).pipe(res);\n+                    \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n+                },\n+            },\n+                function (error, response, body) {\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                    }\n+                }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659683254515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,14 +82,16 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var form = new FormData();\n-            form.append(\"client_id\", req.body.client_id);\n-            form.append(\"client_secret\", req.body.client_secret);\n+            // var form = new FormData();\n+            // form.append(\"client_id\", req.body.client_id);\n+            // form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, body: form, headers: {\n+                url: targetURL, method: req.method, formData: {\n+\n+                }, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659683260490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n             // form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, formData: {\n-\n+                    client_id = \n                 }, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n"
                },
                {
                    "date": 1659683270834,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n             // form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, formData: {\n-                    client_id = \n+                    client_id: req.body.client_id\n                 }, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n"
                },
                {
                    "date": 1659683281515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,10 @@\n             // form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, formData: {\n-                    client_id: req.body.client_id\n+                    client_id: req.body.client_id,\n+                    client_secret: req.body.client_secret\n                 }, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n"
                },
                {
                    "date": 1659683311242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,9 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser'),\n-    FormData = require('form-data')\n+    cookieParser = require('cookie-parser')\n // cookie = require('cookie');\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659683525908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,8 +85,13 @@\n             // var form = new FormData();\n             // form.append(\"client_id\", req.body.client_id);\n             // form.append(\"client_secret\", req.body.client_secret);\n \n+            const formData = {\n+                client_id: req.body.client_id,\n+                client_secret: req.body.client_secret\n+            }\n+\n             request({\n                 url: targetURL, method: req.method, formData: {\n                     client_id: req.body.client_id,\n                     client_secret: req.body.client_secret\n"
                },
                {
                    "date": 1659683550650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,12 +91,9 @@\n                 client_secret: req.body.client_secret\n             }\n \n             request({\n-                url: targetURL, method: req.method, formData: {\n-                    client_id: req.body.client_id,\n-                    client_secret: req.body.client_secret\n-                }, headers: {\n+                url: targetURL, method: req.method, formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659684310953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,13 +85,8 @@\n             // var form = new FormData();\n             // form.append(\"client_id\", req.body.client_id);\n             // form.append(\"client_secret\", req.body.client_secret);\n \n-            const formData = {\n-                client_id: req.body.client_id,\n-                client_secret: req.body.client_secret\n-            }\n-\n             request({\n                 url: targetURL, method: req.method, formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n"
                },
                {
                    "date": 1659685285648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,10 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser')\n+    cookieParser = require('cookie-parser'),\n+    FormData = require('form-data')\n // cookie = require('cookie');\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659685302486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,11 +82,11 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            // var form = new FormData();\n-            // form.append(\"client_id\", req.body.client_id);\n-            // form.append(\"client_secret\", req.body.client_secret);\n+            var form = new FormData();\n+            form.append(\"client_id\", req.body.client_id);\n+            form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n"
                },
                {
                    "date": 1659685311671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n             form.append(\"client_id\", req.body.client_id);\n             form.append(\"client_secret\", req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, formData, headers: {\n+                url: targetURL, method: req.method, data: form, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659685351845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    FormData = require('form-data')\n+    axios = require('axios')\n // cookie = require('cookie');\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659685385135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,11 +82,11 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var form = new FormData();\n-            form.append(\"client_id\", req.body.client_id);\n-            form.append(\"client_secret\", req.body.client_secret);\n+            let formData = new FormData();\n+            formData.append(\"client_id\", req.body.client_id);\n+            formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, data: form, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n"
                },
                {
                    "date": 1659685391184,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n             formData.append(\"client_id\", req.body.client_id);\n             formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, data: form, headers: {\n+                url: targetURL, method: req.method, data: formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                 },\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659685505372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,11 +3,10 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    axios = require('axios')\n-// cookie = require('cookie');\n-app = express();\n+    // cookie = require('cookie');\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1659685510915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,11 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser'),\n-    // cookie = require('cookie');\n-    app = express();\n+    cookieParser = require('cookie-parser')\n+// cookie = require('cookie');\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1659685544466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser')\n+FormData = require('form-data')\n // cookie = require('cookie');\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659686404611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,10 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser')\n-FormData = require('form-data')\n+    cookieParser = require('cookie-parser'),\n+    FormData = require('form-data')\n // cookie = require('cookie');\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n@@ -88,9 +88,9 @@\n             formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, data: formData, headers: {\n-                    \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n+                    \"Content-Type\": false, \"Process-Data\": false\n                 },\n             },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659686544848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n             formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, data: formData, headers: {\n-                    \"Content-Type\": false, \"Process-Data\": false\n+                    'Content-Type': 'multipart/form-data'\n                 },\n             },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659686555816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n             formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, data: formData, headers: {\n-                    'Content-Type': 'multipart/form-data'\n+                    \"Content-Type\": \"multipart/form-data\"\n                 },\n             },\n                 function (error, response, body) {\n                     if (error) {\n"
                },
                {
                    "date": 1659686640232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,14 +82,13 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            let formData = new FormData();\n             formData.append(\"client_id\", req.body.client_id);\n             formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, data: formData, headers: {\n+                url: targetURL, method: req.method, formData: formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n                 },\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659686646327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,10 @@\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n     FormData = require('form-data')\n // cookie = require('cookie');\n+let formData = new FormData();\n+\n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n"
                },
                {
                    "date": 1659686668103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,8 @@\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n     FormData = require('form-data')\n // cookie = require('cookie');\n-let formData = new FormData();\n \n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659686673647,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,8 +83,9 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n+            var formData = new FormData();\n             formData.append(\"client_id\", req.body.client_id);\n             formData.append(\"client_secret\", req.body.client_secret);\n \n             request({\n"
                },
                {
                    "date": 1659686702023,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,10 +84,10 @@\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             var formData = new FormData();\n-            formData.append(\"client_id\", req.body.client_id);\n-            formData.append(\"client_secret\", req.body.client_secret);\n+            formData.append('client_id', req.body.client_id);\n+            formData.append('client_secret', req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, formData: formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659686781048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,11 +83,15 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var formData = new FormData();\n-            formData.append('client_id', req.body.client_id);\n-            formData.append('client_secret', req.body.client_secret);\n+            // var formData = new FormData();\n+            // formData.append('client_id', req.body.client_id);\n+            // formData.append('client_secret', req.body.client_secret);\n+            var form = {\n+                client_id: req.body.client_id,\n+                client_secret: req.body.client_secret\n+            }\n \n             request({\n                 url: targetURL, method: req.method, formData: formData, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659686827020,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,11 +92,11 @@\n                 client_secret: req.body.client_secret\n             }\n \n             request({\n-                url: targetURL, method: req.method, formData: formData, headers: {\n+                url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n-                },\n+                }, formData: form,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659686988549,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,15 +83,11 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            // var formData = new FormData();\n-            // formData.append('client_id', req.body.client_id);\n-            // formData.append('client_secret', req.body.client_secret);\n-            var form = {\n-                client_id: req.body.client_id,\n-                client_secret: req.body.client_secret\n-            }\n+            var formData = new FormData();\n+            formData.append('client_id', req.body.client_id);\n+            formData.append('client_secret', req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659687002264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,11 +83,11 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var formData = new FormData();\n-            formData.append('client_id', req.body.client_id);\n-            formData.append('client_secret', req.body.client_secret);\n+            var form = new FormData();\n+            form.append('client_id', req.body.client_id);\n+            form.append('client_secret', req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659687226455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    FormData = require('form-data')\n+import { FormData } from \"formdata-node\"\n // cookie = require('cookie');\n \n app = express();\n \n"
                },
                {
                    "date": 1659687275490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-import { FormData } from \"formdata-node\"\n+    FormData = require('formdata-node')\n // cookie = require('cookie');\n \n app = express();\n \n"
                },
                {
                    "date": 1659687320594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,10 +84,10 @@\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             var form = new FormData();\n-            form.append('client_id', req.body.client_id);\n-            form.append('client_secret', req.body.client_secret);\n+            form.set('client_id', req.body.client_id);\n+            form.set('client_secret', req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659687335866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n-                }, formData: form,\n+                }, body: form,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659687411124,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,9 +83,9 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var form = new FormData();\n+            const form = new FormData();\n             form.set('client_id', req.body.client_id);\n             form.set('client_secret', req.body.client_secret);\n \n             request({\n"
                },
                {
                    "date": 1659687428785,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,9 @@\n \n             const form = new FormData();\n             form.set('client_id', req.body.client_id);\n             form.set('client_secret', req.body.client_secret);\n+            const encoder = new FormDataEncoder(form)\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659687487429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n-                }, body: form,\n+                }, body: Readable.from(encoder),\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659687501692,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,10 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n+    FormData = require('formdata-node'),\n+    FormData = require('formdata-node'),\n     FormData = require('formdata-node')\n // cookie = require('cookie');\n \n app = express();\n"
                },
                {
                    "date": 1659687514758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n     FormData = require('formdata-node'),\n-    FormData = require('formdata-node'),\n+    FormDataEncoder = require('form-data-encoder'),\n     FormData = require('formdata-node')\n // cookie = require('cookie');\n \n app = express();\n"
                },
                {
                    "date": 1659687522265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n     FormData = require('formdata-node'),\n     FormDataEncoder = require('form-data-encoder'),\n-    FormData = require('formdata-node')\n+    Readable = require('stream')\n // cookie = require('cookie');\n \n app = express();\n \n"
                },
                {
                    "date": 1659687597909,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,14 +3,11 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    FormData = require('formdata-node'),\n-    FormDataEncoder = require('form-data-encoder'),\n-    Readable = require('stream')\n-// cookie = require('cookie');\n+    // cookie = require('cookie');\n \n-app = express();\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1659687610190,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,12 +2,12 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser'),\n-    // cookie = require('cookie');\n+    cookieParser = require('cookie-parser')\n+// cookie = require('cookie');\n \n-    app = express();\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n@@ -85,9 +85,8 @@\n \n             const form = new FormData();\n             form.set('client_id', req.body.client_id);\n             form.set('client_secret', req.body.client_secret);\n-            const encoder = new FormDataEncoder(form)\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659687616888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,9 @@\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n-                }, body: Readable.from(encoder),\n+                }, body: form,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659688057764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,9 +82,9 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            const form = new FormData();\n+            var form = new FormData();\n             form.set('client_id', req.body.client_id);\n             form.set('client_secret', req.body.client_secret);\n \n             request({\n"
                },
                {
                    "date": 1659919606824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,11 +82,11 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var form = new FormData();\n-            form.set('client_id', req.body.client_id);\n-            form.set('client_secret', req.body.client_secret);\n+            // var form = new FormData();\n+            // form.set('client_id', req.body.client_id);\n+            // form.set('client_secret', req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n"
                },
                {
                    "date": 1659919636249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,9 @@\n \n             request({\n                 url: targetURL, method: req.method, headers: {\n                     \"Content-Type\": \"multipart/form-data\"\n-                }, body: form,\n+                }, json: req.body,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659919667789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,11 +87,9 @@\n             // form.set('client_id', req.body.client_id);\n             // form.set('client_secret', req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, headers: {\n-                    \"Content-Type\": \"multipart/form-data\"\n-                }, json: req.body,\n+                url: targetURL, method: req.method, headers: {}, json: req.body,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659919904445,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,19 +85,33 @@\n \n             // var form = new FormData();\n             // form.set('client_id', req.body.client_id);\n             // form.set('client_secret', req.body.client_secret);\n+            let options = {\n+                url: targetURL,\n+                method: req.method,\n+                formData: {\n \n-            request({\n-                url: targetURL, method: req.method, headers: {}, json: req.body,\n-            },\n-                function (error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    } else {\n-                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-                    }\n-                }).pipe(res);\n+                }\n+            }\n+\n+            try {\n+\n+            } catch (e) {\n+\n+            }\n+\n+\n+            // request({\n+            //     url: targetURL, method: req.method, headers: {}, json: req.body,\n+            // },\n+            //     function (error, response, body) {\n+            //         if (error) {\n+            //             console.error('error: ' + error)\n+            //         } else {\n+            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+            //         }\n+            //     }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659919911145,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,9 @@\n \n             try {\n \n             } catch (e) {\n-\n+                console.log(e);\n             }\n \n \n             // request({\n"
                },
                {
                    "date": 1659920022391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,11 @@\n                 }\n             }\n \n             try {\n+                request(options, function (error, response, body) {\n \n+                })\n             } catch (e) {\n                 console.log(e);\n             }\n \n"
                },
                {
                    "date": 1659920031335,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,9 @@\n \n             try {\n                 request(options, function (error, response, body) {\n \n-                })\n+                }).pipe(res);\n             } catch (e) {\n                 console.log(e);\n             }\n \n"
                },
                {
                    "date": 1659920063566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,13 @@\n             }\n \n             try {\n                 request(options, function (error, response, body) {\n-\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                    }\n                 }).pipe(res);\n             } catch (e) {\n                 console.log(e);\n             }\n"
                },
                {
                    "date": 1659920092383,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,9 @@\n             let options = {\n                 url: targetURL,\n                 method: req.method,\n                 formData: {\n-\n+                    key: 'client_id',\n                 }\n             }\n \n             try {\n"
                },
                {
                    "date": 1659920146120,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,8 +90,9 @@\n                 url: targetURL,\n                 method: req.method,\n                 formData: {\n                     key: 'client_id',\n+                    value: req.body.client_id\n                 }\n             }\n \n             try {\n"
                },
                {
                    "date": 1659920232897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,12 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser')\n+    cookieParser = require('cookie-parser'),\n+    FormData = require('form-data'),\n // cookie = require('cookie');\n+const form = new FormData();\n \n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659920253363,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,33 +84,11 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            // var form = new FormData();\n-            // form.set('client_id', req.body.client_id);\n-            // form.set('client_secret', req.body.client_secret);\n-            let options = {\n-                url: targetURL,\n-                method: req.method,\n-                formData: {\n-                    key: 'client_id',\n-                    value: req.body.client_id\n-                }\n-            }\n+            form.set('client_id', req.body.client_id);\n+            form.set('client_secret', req.body.client_secret);\n \n-            try {\n-                request(options, function (error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    } else {\n-                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-                    }\n-                }).pipe(res);\n-            } catch (e) {\n-                console.log(e);\n-            }\n-\n-\n             // request({\n             //     url: targetURL, method: req.method, headers: {}, json: req.body,\n             // },\n             //     function (error, response, body) {\n"
                },
                {
                    "date": 1659920260677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,21 +84,21 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            form.set('client_id', req.body.client_id);\n-            form.set('client_secret', req.body.client_secret);\n+            form.append('client_id', req.body.client_id);\n+            form.append('client_secret', req.body.client_secret);\n \n-            // request({\n-            //     url: targetURL, method: req.method, headers: {}, json: req.body,\n-            // },\n-            //     function (error, response, body) {\n-            //         if (error) {\n-            //             console.error('error: ' + error)\n-            //         } else {\n-            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-            //         }\n-            //     }).pipe(res);\n+            request({\n+                url: targetURL, method: req.method, headers: {}, json: req.body,\n+            },\n+                function (error, response, body) {\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                    }\n+                }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659920273066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n             form.append('client_id', req.body.client_id);\n             form.append('client_secret', req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, headers: {}, json: req.body,\n+                url: targetURL, method: req.method, headers: {}, body: form\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659920294940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n     FormData = require('form-data'),\n // cookie = require('cookie');\n-const form = new FormData();\n+var form = new FormData();\n \n app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n"
                },
                {
                    "date": 1659920305387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,12 +4,11 @@\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n     FormData = require('form-data'),\n-// cookie = require('cookie');\n-var form = new FormData();\n+    // cookie = require('cookie');\n \n-app = express();\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1659920312489,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,12 +3,12 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    FormData = require('form-data'),\n-    // cookie = require('cookie');\n+    FormData = require('form-data')\n+// cookie = require('cookie');\n \n-    app = express();\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n@@ -83,8 +83,10 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n+            var form = new FormData();\n+\n             form.append('client_id', req.body.client_id);\n             form.append('client_secret', req.body.client_secret);\n \n             request({\n"
                },
                {
                    "date": 1659922252282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,9 +84,8 @@\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             var form = new FormData();\n-\n             form.append('client_id', req.body.client_id);\n             form.append('client_secret', req.body.client_secret);\n \n             request({\n"
                },
                {
                    "date": 1659922268245,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n             form.append('client_id', req.body.client_id);\n             form.append('client_secret', req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, headers: {}, body: form\n+                url: targetURL, method: req.method, headers: {}, formData: form\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659922278468,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,14 +83,14 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            var form = new FormData();\n-            form.append('client_id', req.body.client_id);\n-            form.append('client_secret', req.body.client_secret);\n+            var formData = new FormData();\n+            formData.append('client_id', req.body.client_id);\n+            formData.append('client_secret', req.body.client_secret);\n \n             request({\n-                url: targetURL, method: req.method, headers: {}, formData: form\n+                url: targetURL, method: req.method, headers: {}, formData: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659922390507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,9 +84,9 @@\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             var formData = new FormData();\n-            formData.append('client_id', req.body.client_id);\n+            formData.append('client_id', (req.body.client_id || 'NA'));\n             formData.append('client_secret', req.body.client_secret);\n \n             request({\n                 url: targetURL, method: req.method, headers: {}, formData: formData\n"
                },
                {
                    "date": 1659922706744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,9 +85,10 @@\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.client_id || 'NA'));\n-            formData.append('client_secret', req.body.client_secret);\n+            formData.append('client_secret', (req.body.client_secret ||\n+                'NA');\n \n             request({\n                 url: targetURL, method: req.method, headers: {}, formData: formData\n             },\n"
                },
                {
                    "date": 1659922713057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,10 +85,9 @@\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.client_id || 'NA'));\n-            formData.append('client_secret', (req.body.client_secret ||\n-                'NA');\n+            formData.append('client_secret', (req.body.client_secret || 'NA'));\n \n             request({\n                 url: targetURL, method: req.method, headers: {}, formData: formData\n             },\n"
                },
                {
                    "date": 1659922827215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,11 +83,14 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n+            console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n+            console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n+\n             var formData = new FormData();\n-            formData.append('client_id', (req.body.client_id || 'NA'));\n-            formData.append('client_secret', (req.body.client_secret || 'NA'));\n+            formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n+            formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n             request({\n                 url: targetURL, method: req.method, headers: {}, formData: formData\n             },\n"
                },
                {
                    "date": 1659922833743,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,10 +83,10 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n-            console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n+            console.log(\">>>>>>>>>> [client_id] : \" + JSON.stringify(req.body));\n+            console.log(\">>>>>>>>>> [client_secret] : \" + JSON.stringify(req.body));\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n"
                },
                {
                    "date": 1659922843948,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,10 +83,10 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n-            console.log(\">>>>>>>>>> [client_id] : \" + JSON.stringify(req.body));\n-            console.log(\">>>>>>>>>> [client_secret] : \" + JSON.stringify(req.body));\n+            console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n+            console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n"
                },
                {
                    "date": 1659922912544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n             request({\n-                url: targetURL, method: req.method, headers: {}, formData: formData\n+                url: targetURL, method: req.method, headers: {}, body: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659922995588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n             request({\n-                url: targetURL, method: req.method, headers: {}, body: formData\n+                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659923020802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n             request({\n-                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n+                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659923068141,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,8 +90,17 @@\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n+            var uploadOptions = {\n+                \"url\": \"https://upload/url\",\n+                \"method\": \"POST\",\n+                \"headers\": {\n+                    \"Authorization\": \"Bearer \" + accessToken\n+                },\n+                \"formData\": formData\n+            }\n+\n             request({\n                 url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659923076845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,12 +91,11 @@\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n             var uploadOptions = {\n-                \"url\": \"https://upload/url\",\n+                \"url\": targetURL,\n                 \"method\": \"POST\",\n                 \"headers\": {\n-                    \"Authorization\": \"Bearer \" + accessToken\n                 },\n                 \"formData\": formData\n             }\n \n"
                },
                {
                    "date": 1659923091941,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,8 +108,19 @@\n                     } else {\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n+\n+            // request({\n+            //     url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n+            // },\n+            //     function (error, response, body) {\n+            //         if (error) {\n+            //             console.error('error: ' + error)\n+            //         } else {\n+            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+            //         }\n+            //     }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659923097881,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,11 +98,9 @@\n                 },\n                 \"formData\": formData\n             }\n \n-            request({\n-                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n-            },\n+            request(uploadOptions,\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n"
                },
                {
                    "date": 1659923130649,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,35 +90,18 @@\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n-            var uploadOptions = {\n-                \"url\": targetURL,\n-                \"method\": \"POST\",\n-                \"headers\": {\n-                },\n-                \"formData\": formData\n-            }\n-\n-            request(uploadOptions,\n+            request({\n+                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n+            },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n-\n-            // request({\n-            //     url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n-            // },\n-            //     function (error, response, body) {\n-            //         if (error) {\n-            //             console.error('error: ' + error)\n-            //         } else {\n-            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-            //         }\n-            //     }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659923136375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,18 +90,35 @@\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n-            request({\n-                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n-            },\n+            var uploadOptions = {\n+                \"url\": targetURL,\n+                \"method\": \"POST\",\n+                \"headers\": {\n+                },\n+                \"formData\": formData\n+            }\n+\n+            request(uploadOptions,\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n+\n+            // request({\n+            //     url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n+            // },\n+            //     function (error, response, body) {\n+            //         if (error) {\n+            //             console.error('error: ' + error)\n+            //         } else {\n+            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+            //         }\n+            //     }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659923150994,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,35 +90,18 @@\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n-            var uploadOptions = {\n-                \"url\": targetURL,\n-                \"method\": \"POST\",\n-                \"headers\": {\n-                },\n-                \"formData\": formData\n-            }\n-\n-            request(uploadOptions,\n+            request({\n+                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n+            },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n-\n-            // request({\n-            //     url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n-            // },\n-            //     function (error, response, body) {\n-            //         if (error) {\n-            //             console.error('error: ' + error)\n-            //         } else {\n-            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-            //         }\n-            //     }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659923254529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,8 +60,9 @@\n     } else {\n         var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var authorization = req.header('authorization');\n         var ServiceType = req.header('Service-Type');\n+        var ServiceUrl = req.header('Service-Url');\n \n         if (!targetURL) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n"
                },
                {
                    "date": 1659923264731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,9 @@\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n+            console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n"
                },
                {
                    "date": 1659923270722,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,9 +86,9 @@\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n             console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n-            console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n+            console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n"
                },
                {
                    "date": 1659923499139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,8 +88,12 @@\n             console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n+            if (ServiceUrl == \"/authorize\") {\n+\n+            }\n+\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n"
                },
                {
                    "date": 1659923507609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,12 +88,11 @@\n             console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n-            if (ServiceUrl == \"/authorize\") {\n+            // if (ServiceUrl == \"/authorize\") {\n+            // }\n \n-            }\n-\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n"
                },
                {
                    "date": 1659946237026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,10 +88,10 @@\n             console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n-            // if (ServiceUrl == \"/authorize\") {\n-            // }\n+            if (ServiceUrl == \"/authorize\") {\n+            }\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n"
                },
                {
                    "date": 1659946267134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,8 +91,11 @@\n \n             if (ServiceUrl == \"/authorize\") {\n             }\n \n+            var client_id = \"\";\n+            var client_secret = \"\";\n+\n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n \n"
                },
                {
                    "date": 1659946276450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,10 +91,10 @@\n \n             if (ServiceUrl == \"/authorize\") {\n             }\n \n-            var client_id = \"\";\n-            var client_secret = \"\";\n+            var client_id = req.body.dataBody.client_id;\n+            var client_secret = req.body.dataBody.client_secret;\n \n             var formData = new FormData();\n             formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n             formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n"
                },
                {
                    "date": 1659946283371,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,17 +89,18 @@\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n+                var client_id = req.body.dataBody.client_id;\n+                var client_secret = req.body.dataBody.client_secret;\n+\n+                var formData = new FormData();\n+                formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n+                formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n+\n             }\n \n-            var client_id = req.body.dataBody.client_id;\n-            var client_secret = req.body.dataBody.client_secret;\n \n-            var formData = new FormData();\n-            formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n-            formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n-\n             request({\n                 url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659946288851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,11 +93,10 @@\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n \n                 var formData = new FormData();\n-                formData.append('client_id', (req.body.dataBody.client_id || 'NA'));\n+                formData.append('client_id', (client_id || 'NA'));\n                 formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n-\n             }\n \n \n             request({\n"
                },
                {
                    "date": 1659946327378,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n     if (req.method === 'OPTIONS') {\n         // CORS Preflight\n         res.send();\n     } else {\n-        var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n+        var targetUrl = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n         var authorization = req.header('authorization');\n         var ServiceType = req.header('Service-Type');\n         var ServiceUrl = req.header('Service-Url');\n \n@@ -94,12 +94,11 @@\n                 var client_secret = req.body.dataBody.client_secret;\n \n                 var formData = new FormData();\n                 formData.append('client_id', (client_id || 'NA'));\n-                formData.append('client_secret', (req.body.dataBody.client_secret || 'NA'));\n+                formData.append('client_secret', (client_secret || 'NA'));\n             }\n \n-\n             request({\n                 url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n             },\n                 function (error, response, body) {\n"
                },
                {
                    "date": 1659946332744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,14 +62,14 @@\n         var authorization = req.header('authorization');\n         var ServiceType = req.header('Service-Type');\n         var ServiceUrl = req.header('Service-Url');\n \n-        if (!targetURL) {\n+        if (!targetUrl) {\n             res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n             return;\n         }\n \n-        console.log(\">>>>>>>>>> [targetURL] : \" + targetURL);\n+        console.log(\">>>>>>>>>> [targetUrl] : \" + targetUrl);\n         console.log(\">>>>>>>>>> [ServiceType] : \" + ServiceType);\n \n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n"
                },
                {
                    "date": 1659946341240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,9 @@\n \n         if (ServiceType == \"DLS\") {\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n \n-            request({ url: targetURL, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n+            request({ url: targetUrl, method: req.method, json: req.body, headers: { 'authorization': authorization }, },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n                     } else {\n@@ -98,9 +98,9 @@\n                 formData.append('client_secret', (client_secret || 'NA'));\n             }\n \n             request({\n-                url: targetURL, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659946378499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,9 @@\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n \n-            request({ url: targetURL, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n+            request({ url: targetUrl, method: req.method, json: req.body, headers: { 'cookie': 'JSESSIONID=' + jsessionid }, },\n                 function (error, response, body) {\n                     // var cookies = response.headers['set-cookie'];\n \n                     if (error) {\n"
                },
                {
                    "date": 1659946469114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n                 formData.append('client_secret', (client_secret || 'NA'));\n             }\n \n             request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, data: formData\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659946488981,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n                 formData.append('client_secret', (client_secret || 'NA'));\n             }\n \n             request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659946501392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,18 +89,18 @@\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n-                var client_id = req.body.dataBody.client_id;\n-                var client_secret = req.body.dataBody.client_secret;\n-\n-                var formData = new FormData();\n-                formData.append('client_id', (client_id || 'NA'));\n-                formData.append('client_secret', (client_secret || 'NA'));\n             }\n+            var client_id = req.body.dataBody.client_id;\n+            var client_secret = req.body.dataBody.client_secret;\n \n+            var formData = new FormData();\n+            formData.append('client_id', (client_id || 'NA'));\n+            formData.append('client_secret', (client_secret || 'NA'));\n+\n             request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659946514934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,17 +90,18 @@\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n             }\n+\n             var client_id = req.body.dataBody.client_id;\n             var client_secret = req.body.dataBody.client_secret;\n \n             var formData = new FormData();\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659946593524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,18 +98,30 @@\n             var formData = new FormData();\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n-            request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n-            },\n-                function (error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    } else {\n-                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-                    }\n-                }).pipe(res);\n+            const options = {\n+                host: 'postman-echo.com',\n+                path: '/post',\n+                method: 'POST',\n+                protocol: 'https:', // note : in the end\n+                headers: {\n+                    Authorization: `Basic some-token-here`,\n+                },\n+            }\n+\n+            const res = await makeRequest(formData, options)\n+\n+            // request({\n+            //     url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n+            // },\n+            //     function (error, response, body) {\n+            //         if (error) {\n+            //             console.error('error: ' + error)\n+            //         } else {\n+            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+            //         }\n+            //     }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659946599088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,9 @@\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             const options = {\n-                host: 'postman-echo.com',\n+                host: targetUrl,\n                 path: '/post',\n                 method: 'POST',\n                 protocol: 'https:', // note : in the end\n                 headers: {\n"
                },
                {
                    "date": 1659946605376,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,8 @@\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             const options = {\n                 host: targetUrl,\n-                path: '/post',\n                 method: 'POST',\n                 protocol: 'https:', // note : in the end\n                 headers: {\n                     Authorization: `Basic some-token-here`,\n"
                },
                {
                    "date": 1659946614084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,8 @@\n \n             const options = {\n                 host: targetUrl,\n                 method: 'POST',\n-                protocol: 'https:', // note : in the end\n                 headers: {\n                     Authorization: `Basic some-token-here`,\n                 },\n             }\n"
                },
                {
                    "date": 1659946656757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,11 +101,8 @@\n \n             const options = {\n                 host: targetUrl,\n                 method: 'POST',\n-                headers: {\n-                    Authorization: `Basic some-token-here`,\n-                },\n             }\n \n             const res = await makeRequest(formData, options)\n \n@@ -118,8 +115,29 @@\n             //         } else {\n             //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n             //         }\n             //     }).pipe(res);\n+\n+            async function makeRequest(formData, options) {\n+                return new Promise((resolve, reject) => {\n+                    const req = formData.submit(options, (err, res) => {\n+                        if (err) {\n+                            return reject(new Error(err.message))\n+                        }\n+\n+                        if (res.statusCode < 200 || res.statusCode > 299) {\n+                            return reject(new Error(`HTTP status code ${res.statusCode}`))\n+                        }\n+\n+                        const body = []\n+                        res.on('data', (chunk) => body.push(chunk))\n+                        res.on('end', () => {\n+                            const resString = Buffer.concat(body).toString()\n+                            resolve(resString)\n+                        })\n+                    })\n+                })\n+            }\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659946672058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n                 host: targetUrl,\n                 method: 'POST',\n             }\n \n-            const res = await makeRequest(formData, options)\n+            const res = await makeRequest(formData, options).pipe(res);\n \n             // request({\n             //     url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n             // },\n"
                },
                {
                    "date": 1659946695588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,29 +115,8 @@\n             //         } else {\n             //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n             //         }\n             //     }).pipe(res);\n-\n-            async function makeRequest(formData, options) {\n-                return new Promise((resolve, reject) => {\n-                    const req = formData.submit(options, (err, res) => {\n-                        if (err) {\n-                            return reject(new Error(err.message))\n-                        }\n-\n-                        if (res.statusCode < 200 || res.statusCode > 299) {\n-                            return reject(new Error(`HTTP status code ${res.statusCode}`))\n-                        }\n-\n-                        const body = []\n-                        res.on('data', (chunk) => body.push(chunk))\n-                        res.on('end', () => {\n-                            const resString = Buffer.concat(body).toString()\n-                            resolve(resString)\n-                        })\n-                    })\n-                })\n-            }\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659946703313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,8 +31,29 @@\n         return \"\";\n     }\n }\n \n+async function makeRequest(formData, options) {\n+    return new Promise((resolve, reject) => {\n+        const req = formData.submit(options, (err, res) => {\n+            if (err) {\n+                return reject(new Error(err.message))\n+            }\n+\n+            if (res.statusCode < 200 || res.statusCode > 299) {\n+                return reject(new Error(`HTTP status code ${res.statusCode}`))\n+            }\n+\n+            const body = []\n+            res.on('data', (chunk) => body.push(chunk))\n+            res.on('end', () => {\n+                const resString = Buffer.concat(body).toString()\n+                resolve(resString)\n+            })\n+        })\n+    })\n+}\n+\n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n"
                },
                {
                    "date": 1659946736157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n                 host: targetUrl,\n                 method: 'POST',\n             }\n \n-            const res = await makeRequest(formData, options).pipe(res);\n+            const res = await makeRequest(formData, options);\n \n             // request({\n             //     url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n             // },\n"
                },
                {
                    "date": 1659946751477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,25 +119,18 @@\n             var formData = new FormData();\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n-            const options = {\n-                host: targetUrl,\n-                method: 'POST',\n-            }\n-\n-            const res = await makeRequest(formData, options);\n-\n-            // request({\n-            //     url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n-            // },\n-            //     function (error, response, body) {\n-            //         if (error) {\n-            //             console.error('error: ' + error)\n-            //         } else {\n-            //             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-            //         }\n-            //     }).pipe(res);\n+            request({\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n+            },\n+                function (error, response, body) {\n+                    if (error) {\n+                        console.error('error: ' + error)\n+                    } else {\n+                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                    }\n+                }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659946758609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,29 +31,8 @@\n         return \"\";\n     }\n }\n \n-async function makeRequest(formData, options) {\n-    return new Promise((resolve, reject) => {\n-        const req = formData.submit(options, (err, res) => {\n-            if (err) {\n-                return reject(new Error(err.message))\n-            }\n-\n-            if (res.statusCode < 200 || res.statusCode > 299) {\n-                return reject(new Error(`HTTP status code ${res.statusCode}`))\n-            }\n-\n-            const body = []\n-            res.on('data', (chunk) => body.push(chunk))\n-            res.on('end', () => {\n-                const resString = Buffer.concat(body).toString()\n-                resolve(resString)\n-            })\n-        })\n-    })\n-}\n-\n // app.use(bodyParser.json({ limit: myLimit }));\n app.use(bodyParser.json(session({\n     httpOnly: true,\t//자바스크립트를 통해 세션 쿠키를 사용할 수 없도록 함\n     // secure: ture,\t//https 환경에서만 session 정보를 주고받도록처리\n"
                },
                {
                    "date": 1659946781300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,9 @@\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, formData: formData\n+                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659946871165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n var express = require('express'),\n     request = require('request'),\n+    rp = require('request-promise'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n"
                },
                {
                    "date": 1659946920802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             request({\n-                url: targetUrl, method: req.method, headers: { 'Content-Type': 'multipart/form-data' }, body: formData\n+                url: targetUrl, method: req.method, body: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659947064692,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n var express = require('express'),\n     request = require('request'),\n-    rp = require('request-promise'),\n+    // rp = require('request-promise'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n"
                },
                {
                    "date": 1659947131911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,10 +99,10 @@\n             var formData = new FormData();\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n-            request({\n-                url: targetUrl, method: req.method, body: formData\n+            request.post({\n+                url: targetUrl, formData: formData\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659947191092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,12 @@\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             request.post({\n-                url: targetUrl, formData: formData\n+                url: targetUrl, formData: formData, headers: {\n+                    \"Content-Type\": \"multipart/form-data\",\n+                    \"accept\": \"*/*\"\n+                }\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659947209830,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,12 +100,12 @@\n             formData.append('client_id', (client_id || 'NA'));\n             formData.append('client_secret', (client_secret || 'NA'));\n \n             request.post({\n-                url: targetUrl, formData: formData, headers: {\n+                url: targetUrl, headers: {\n                     \"Content-Type\": \"multipart/form-data\",\n                     \"accept\": \"*/*\"\n-                }\n+                }, formData: formData,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659947235327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n             request.post({\n                 url: targetUrl, headers: {\n                     \"Content-Type\": \"multipart/form-data\",\n                     \"accept\": \"*/*\"\n-                }, formData: formData,\n+                }, body: formData,\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659947278629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,12 @@\n             request.post({\n                 url: targetUrl, headers: {\n                     \"Content-Type\": \"multipart/form-data\",\n                     \"accept\": \"*/*\"\n-                }, body: formData,\n+                }, formData: {\n+                    client_id: client_id,\n+                    client_secret: client_secret\n+                }\n             },\n                 function (error, response, body) {\n                     if (error) {\n                         console.error('error: ' + error)\n"
                },
                {
                    "date": 1659947475906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n             request.post({\n                 url: targetUrl, headers: {\n                     \"Content-Type\": \"multipart/form-data\",\n                     \"accept\": \"*/*\"\n-                }, formData: {\n+                }, \"formData\": {\n                     client_id: client_id,\n                     client_secret: client_secret\n                 }\n             },\n"
                },
                {
                    "date": 1659947551941,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,33 +90,34 @@\n             console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n+                var client_id = req.body.dataBody.client_id;\n+                var client_secret = req.body.dataBody.client_secret;\n+\n+                var formData = new FormData();\n+                formData.append('client_id', (client_id || 'NA'));\n+                formData.append('client_secret', (client_secret || 'NA'));\n+\n+                request.post({\n+                    url: targetUrl, headers: {\n+                        \"Content-Type\": \"multipart/form-data\",\n+                        \"accept\": \"*/*\"\n+                    }, \"formData\": {\n+                        client_id: client_id,\n+                        client_secret: client_secret\n+                    }\n+                },\n+                    function (error, response, body) {\n+                        if (error) {\n+                            console.error('error: ' + error)\n+                        } else {\n+                            console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                        }\n+                    }).pipe(res);\n             }\n \n-            var client_id = req.body.dataBody.client_id;\n-            var client_secret = req.body.dataBody.client_secret;\n \n-            var formData = new FormData();\n-            formData.append('client_id', (client_id || 'NA'));\n-            formData.append('client_secret', (client_secret || 'NA'));\n-\n-            request.post({\n-                url: targetUrl, headers: {\n-                    \"Content-Type\": \"multipart/form-data\",\n-                    \"accept\": \"*/*\"\n-                }, \"formData\": {\n-                    client_id: client_id,\n-                    client_secret: client_secret\n-                }\n-            },\n-                function (error, response, body) {\n-                    if (error) {\n-                        console.error('error: ' + error)\n-                    } else {\n-                        console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n-                    }\n-                }).pipe(res);\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659947629934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,11 +113,13 @@\n                         } else {\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n-            }\n+            } else if (ServiceUrl == \"/snowme_process\") {\n \n+            } else if (ServiceUrl == \"/extends\") {\n \n+            }\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n             console.log(\">>>>>>>>>> [REQUEST/BODY] : \" + JSON.stringify(req.body.dataBody, null, 4));\n"
                },
                {
                    "date": 1659947782566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,11 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n-\n+                var content = req.body.dataBody.content;\n+                var segment = req.body.dataBody.segment;\n+                var layout_type = req.body.dataBody.layout_type;\n             } else if (ServiceUrl == \"/extends\") {\n \n             }\n         } else {\n"
                },
                {
                    "date": 1659947800921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,8 +117,29 @@\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 var content = req.body.dataBody.content;\n                 var segment = req.body.dataBody.segment;\n                 var layout_type = req.body.dataBody.layout_type;\n+\n+                var formData = new FormData();\n+                formData.append('client_id', (client_id || 'NA'));\n+                formData.append('client_secret', (client_secret || 'NA'));\n+\n+                request.post({\n+                    url: targetUrl, headers: {\n+                        \"Content-Type\": \"multipart/form-data\",\n+                        \"accept\": \"*/*\"\n+                    }, \"formData\": {\n+                        client_id: client_id,\n+                        client_secret: client_secret\n+                    }\n+                },\n+                    function (error, response, body) {\n+                        if (error) {\n+                            console.error('error: ' + error)\n+                        } else {\n+                            console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                        }\n+                    }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n \n             }\n         } else {\n"
                },
                {
                    "date": 1659947807680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,10 +119,10 @@\n                 var segment = req.body.dataBody.segment;\n                 var layout_type = req.body.dataBody.layout_type;\n \n                 var formData = new FormData();\n-                formData.append('client_id', (client_id || 'NA'));\n-                formData.append('client_secret', (client_secret || 'NA'));\n+                formData.append('content', (content || 'NA'));\n+                formData.append('segment', (segment || 'NA'));\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n"
                },
                {
                    "date": 1659947813734,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,11 +93,11 @@\n             if (ServiceUrl == \"/authorize\") {\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n \n-                var formData = new FormData();\n-                formData.append('client_id', (client_id || 'NA'));\n-                formData.append('client_secret', (client_secret || 'NA'));\n+                // var formData = new FormData();\n+                // formData.append('client_id', (client_id || 'NA'));\n+                // formData.append('client_secret', (client_secret || 'NA'));\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n"
                },
                {
                    "date": 1659947829638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,19 +118,16 @@\n                 var content = req.body.dataBody.content;\n                 var segment = req.body.dataBody.segment;\n                 var layout_type = req.body.dataBody.layout_type;\n \n-                var formData = new FormData();\n-                formData.append('content', (content || 'NA'));\n-                formData.append('segment', (segment || 'NA'));\n-\n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        client_id: client_id,\n-                        client_secret: client_secret\n+                        content: content,\n+                        segment: segment,\n+                        layout_type: layout_type\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1659947899234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        content: content,\n+                        content: (client_id || 'NA')\n                         segment: segment,\n                         layout_type: layout_type\n                     }\n                 },\n"
                },
                {
                    "date": 1659947914672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,11 +123,11 @@\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        content: (client_id || 'NA')\n-                        segment: segment,\n-                        layout_type: layout_type\n+                        content: (client_id || 'NA'),\n+                        segment: (segment || 'NA'),\n+                        layout_type: (layout_type || 'NA'),\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1659947921560,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        content: (client_id || 'NA'),\n+                        content: (content || 'NA'),\n                         segment: (segment || 'NA'),\n                         layout_type: (layout_type || 'NA'),\n                     }\n                 },\n"
                },
                {
                    "date": 1659947935248,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,29 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n+                var content = req.body.dataBody.content;\n+                var segment = req.body.dataBody.segment;\n+                var layout_type = req.body.dataBody.layout_type;\n \n+                request.post({\n+                    url: targetUrl, headers: {\n+                        \"Content-Type\": \"multipart/form-data\",\n+                        \"accept\": \"*/*\"\n+                    }, \"formData\": {\n+                        content: (content || 'NA'),\n+                        segment: (segment || 'NA'),\n+                        layout_type: (layout_type || 'NA'),\n+                    }\n+                },\n+                    function (error, response, body) {\n+                        if (error) {\n+                            console.error('error: ' + error)\n+                        } else {\n+                            console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n+                        }\n+                    }).pipe(res);\n             }\n         } else {\n             console.log(\">>>>>>>>>> [TRXCD] : \" + req.body.dataHeader.trxCd);\n             console.log(\">>>>>>>>>> [REQUEST/HEAD] : \" + JSON.stringify(req.body.dataHeader, null, 4));\n"
                },
                {
                    "date": 1659947956155,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,18 +136,16 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n-                var content = req.body.dataBody.content;\n-                var segment = req.body.dataBody.segment;\n-                var layout_type = req.body.dataBody.layout_type;\n+                var image = req.body.dataBody.image;\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        content: (content || 'NA'),\n+                        image: (image || 'NA'),\n                         segment: (segment || 'NA'),\n                         layout_type: (layout_type || 'NA'),\n                     }\n                 },\n"
                },
                {
                    "date": 1659947961688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,11 +143,9 @@\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        image: (image || 'NA'),\n-                        segment: (segment || 'NA'),\n-                        layout_type: (layout_type || 'NA'),\n+                        image: (image || 'NA')\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1659948003849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,9 +102,9 @@\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        client_id: client_id,\n+                        client_id: (client_id || 'NA'),\n                         client_secret: client_secret\n                     }\n                 },\n                     function (error, response, body) {\n@@ -143,9 +143,9 @@\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n-                        image: (image || 'NA')\n+                        image: (image || 'NA'),\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1659948592435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n                         client_id: (client_id || 'NA'),\n-                        client_secret: client_secret\n+                        client_secret: (client_secret || 'NA')\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n@@ -121,9 +121,10 @@\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n-                        \"accept\": \"*/*\"\n+                        \"accept\": \"*/*\",\n+                        \"Authorization\": authorization\n                     }, \"formData\": {\n                         content: (content || 'NA'),\n                         segment: (segment || 'NA'),\n                         layout_type: (layout_type || 'NA'),\n"
                },
                {
                    "date": 1659948613326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\",\n-                        \"Authorization\": authorization\n+                        \"authorization\": authorization\n                     }, \"formData\": {\n                         content: (content || 'NA'),\n                         segment: (segment || 'NA'),\n                         layout_type: (layout_type || 'NA'),\n"
                },
                {
                    "date": 1659948644298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,9 +120,9 @@\n                 var layout_type = req.body.dataBody.layout_type;\n \n                 request.post({\n                     url: targetUrl, headers: {\n-                        \"Content-Type\": \"multipart/form-data\",\n+                        // \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\",\n                         \"authorization\": authorization\n                     }, \"formData\": {\n                         content: (content || 'NA'),\n"
                },
                {
                    "date": 1659948655613,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,9 +121,9 @@\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         // \"Content-Type\": \"multipart/form-data\",\n-                        \"accept\": \"*/*\",\n+                        // \"accept\": \"*/*\",\n                         \"authorization\": authorization\n                     }, \"formData\": {\n                         content: (content || 'NA'),\n                         segment: (segment || 'NA'),\n"
                },
                {
                    "date": 1659948675174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,12 +93,8 @@\n             if (ServiceUrl == \"/authorize\") {\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n \n-                // var formData = new FormData();\n-                // formData.append('client_id', (client_id || 'NA'));\n-                // formData.append('client_secret', (client_secret || 'NA'));\n-\n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n"
                },
                {
                    "date": 1659948681685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,10 +116,8 @@\n                 var layout_type = req.body.dataBody.layout_type;\n \n                 request.post({\n                     url: targetUrl, headers: {\n-                        // \"Content-Type\": \"multipart/form-data\",\n-                        // \"accept\": \"*/*\",\n                         \"authorization\": authorization\n                     }, \"formData\": {\n                         content: (content || 'NA'),\n                         segment: (segment || 'NA'),\n"
                },
                {
                    "date": 1659948691169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,13 +117,9 @@\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"authorization\": authorization\n-                    }, \"formData\": {\n-                        content: (content || 'NA'),\n-                        segment: (segment || 'NA'),\n-                        layout_type: (layout_type || 'NA'),\n-                    }\n+                    }, json: req.body\n                 },\n                     function (error, response, body) {\n                         if (error) {\n                             console.error('error: ' + error)\n"
                },
                {
                    "date": 1659948722650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,14 +84,14 @@\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n-\n-            console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n-            console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n+                console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n+                console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n+\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n \n                 request.post({\n@@ -110,11 +110,11 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n-                var content = req.body.dataBody.content;\n-                var segment = req.body.dataBody.segment;\n-                var layout_type = req.body.dataBody.layout_type;\n+                // var content = req.body.dataBody.content;\n+                // var segment = req.body.dataBody.segment;\n+                // var layout_type = req.body.dataBody.layout_type;\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"authorization\": authorization\n"
                },
                {
                    "date": 1659948731017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,13 +87,12 @@\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n-                console.log(\">>>>>>>>>> [client_id] : \" + req.body.dataBody.client_id);\n-                console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n-\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n+                console.log(\">>>>>>>>>> [client_id] : \" + client_id);\n+                console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n"
                },
                {
                    "date": 1659948764781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n             if (ServiceUrl == \"/authorize\") {\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n                 console.log(\">>>>>>>>>> [client_id] : \" + client_id);\n-                console.log(\">>>>>>>>>> [client_secret] : \" + req.body.dataBody.client_secret);\n+                console.log(\">>>>>>>>>> [client_secret] : \" + client_secret);\n \n                 request.post({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n@@ -109,12 +109,8 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n-                // var content = req.body.dataBody.content;\n-                // var segment = req.body.dataBody.segment;\n-                // var layout_type = req.body.dataBody.layout_type;\n-\n                 request.post({\n                     url: targetUrl, headers: {\n                         \"authorization\": authorization\n                     }, json: req.body\n"
                },
                {
                    "date": 1659948781424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,10 +109,10 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n-                request.post({\n-                    url: targetUrl, headers: {\n+                request({\n+                    url: targetUrl, method: req.method, headers: {\n                         \"authorization\": authorization\n                     }, json: req.body\n                 },\n                     function (error, response, body) {\n"
                },
                {
                    "date": 1659948794151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,11 +110,11 @@\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n-                    url: targetUrl, method: req.method, headers: {\n+                    url: targetUrl, method: req.method, json: req.body, headers: {\n                         \"authorization\": authorization\n-                    }, json: req.body\n+                    },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n                             console.error('error: ' + error)\n"
                },
                {
                    "date": 1659948805683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,11 +110,9 @@\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n-                    url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"authorization\": authorization\n-                    },\n+                    url: targetUrl, method: req.method, json: req.body, headers: { \"authorization\": authorization },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n                             console.error('error: ' + error)\n"
                },
                {
                    "date": 1659948829283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,9 @@\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n-                    url: targetUrl, method: req.method, json: req.body, headers: { \"authorization\": authorization },\n+                    url: targetUrl, method: req.method, json: req.body, headers: { \"Authorization\": authorization },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n                             console.error('error: ' + error)\n"
                },
                {
                    "date": 1659948850676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,10 +83,10 @@\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n+            console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n-            console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n \n             if (ServiceUrl == \"/authorize\") {\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n"
                },
                {
                    "date": 1659948911457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,11 @@\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n-                    url: targetUrl, method: req.method, json: req.body, headers: { \"Authorization\": authorization },\n+                    url: targetUrl, method: req.method, json: req.body, headers: {\n+                        \"Authorization\": authorization, Accept: \"application/json\"\n+                    },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n                             console.error('error: ' + error)\n"
                },
                {
                    "date": 1659949608830,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,6 @@\n var express = require('express'),\n     request = require('request'),\n-    // rp = require('request-promise'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n"
                },
                {
                    "date": 1659949615284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,12 +3,12 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    FormData = require('form-data')\n-// cookie = require('cookie');\n+    // FormData = require('form-data')\n+    // cookie = require('cookie');\n \n-app = express();\n+    app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1659949621927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,8 @@\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n     cookieParser = require('cookie-parser'),\n-    // FormData = require('form-data')\n     // cookie = require('cookie');\n \n     app = express();\n \n"
                },
                {
                    "date": 1659949879487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,12 +2,12 @@\n     request = require('request'),\n     session = require('express-session'),\n     bodyParser = require('body-parser'),\n     setCookie = require('set-cookie-parser'),\n-    cookieParser = require('cookie-parser'),\n-    // cookie = require('cookie');\n+    cookieParser = require('cookie-parser')\n+// cookie = require('cookie');\n \n-    app = express();\n+app = express();\n \n process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n \n // var myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\n"
                },
                {
                    "date": 1660026031669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": authorization, Accept: \"application/json\"\n+                        \"Authorization\": \"Bearer \" + authorization, Accept: \"application/json\"\n                     },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660028747022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n                 var image = req.body.dataBody.image;\n \n-                request.post({\n+                request({\n                     url: targetUrl, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n"
                },
                {
                    "date": 1660028757055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n             } else if (ServiceUrl == \"/extends\") {\n                 var image = req.body.dataBody.image;\n \n                 request({\n-                    url: targetUrl, headers: {\n+                    url: targetUrl, json: req.body, headers: {\n                         \"Content-Type\": \"multipart/form-data\",\n                         \"accept\": \"*/*\"\n                     }, \"formData\": {\n                         image: (image || 'NA'),\n"
                },
                {
                    "date": 1660028770373,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization, Accept: \"application/json\"\n+                        \"Authorization\": \"Bearer \" + authorization\n                     },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n@@ -124,12 +124,9 @@\n                 var image = req.body.dataBody.image;\n \n                 request({\n                     url: targetUrl, json: req.body, headers: {\n-                        \"Content-Type\": \"multipart/form-data\",\n-                        \"accept\": \"*/*\"\n-                    }, \"formData\": {\n-                        image: (image || 'NA'),\n+                        \"Authorization\": \"Bearer \" + authorization\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660028784788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n             } else if (ServiceUrl == \"/extends\") {\n                 var image = req.body.dataBody.image;\n \n                 request({\n-                    url: targetUrl, json: req.body, headers: {\n+                    url: targetUrl, method: req.method, json: req.body, headers: {\n                         \"Authorization\": \"Bearer \" + authorization\n                     }\n                 },\n                     function (error, response, body) {\n"
                },
                {
                    "date": 1660029025121,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,8 +83,9 @@\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n+            console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n \n             if (ServiceUrl == \"/authorize\") {\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n"
                },
                {
                    "date": 1660029393437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,10 +82,10 @@\n                     }\n                 }).pipe(res);\n         } else if (ServiceType == \"AVATA\") {\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n+            console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n-            console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n \n             if (ServiceUrl == \"/authorize\") {\n                 var client_id = req.body.dataBody.client_id;\n                 var client_secret = req.body.dataBody.client_secret;\n"
                },
                {
                    "date": 1660029415842,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,10 +121,8 @@\n                             console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n-                var image = req.body.dataBody.image;\n-\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n                         \"Authorization\": \"Bearer \" + authorization\n                     }\n"
                },
                {
                    "date": 1660032691945,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n     //     decodeValues: true,\n     //     map: true,\n     // });\n     // return cookies['JSESSIONID'] && cookies['JSESSIONID']['value'];\n-    if ((response.headers != null) && (response.headers != undefined)) {\n+    if ((response != null) && (response.headers != null) && (response.headers != undefined)) {\n         const cookies = setCookie.parse(response.headers['set-cookie'], {\n             decodeValues: true,\n             map: true,\n         });\n"
                },
                {
                    "date": 1660126552203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization\n+                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"application/json\"\n                     },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n@@ -123,9 +123,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization\n+                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"application/json\"\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660126626688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n                 request({\n-                    url: targetUrl, method: req.method, json: req.body, headers: {\n+                    url: targetUrl, method: \"POST\", json: req.body, headers: {\n                         \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"application/json\"\n                     }\n                 },\n                     function (error, response, body) {\n"
                },
                {
                    "date": 1660126649396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n                         }\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n                 request({\n-                    url: targetUrl, method: \"POST\", json: req.body, headers: {\n+                    url: targetUrl, method: req.method, json: req.body, headers: {\n                         \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"application/json\"\n                     }\n                 },\n                     function (error, response, body) {\n"
                },
                {
                    "date": 1660126800645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"application/json\"\n+                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"multipart/form-data\"\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660126807950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/extends\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"multipart/form-data\"\n+                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                     }\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660126833443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"application/json\"\n+                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n                     },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660126864009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,9 @@\n                     }).pipe(res);\n             } else if (ServiceUrl == \"/snowme_process\") {\n                 request({\n                     url: targetUrl, method: req.method, json: req.body, headers: {\n-                        \"Authorization\": \"Bearer \" + authorization, \"Content-Type\": \"multipart/form-data\", \"accept\": \"*/*\"\n+                        \"Authorization\": \"Bearer \" + authorization\n                     },\n                 },\n                     function (error, response, body) {\n                         if (error) {\n"
                },
                {
                    "date": 1660186214664,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n                     } else {\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n-        } else if (ServiceType == \"AVATA\") {\n+        } else if (ServiceType == \"AVATAR\") {\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n"
                },
                {
                    "date": 1660189938502,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n                     } else {\n                         console.log(\">>>>>>>>>> [body] : \" + JSON.stringify(body, null, 4));\n                     }\n                 }).pipe(res);\n-        } else if (ServiceType == \"AVATAR\") {\n+        } else if ((ServiceType == \"AVATA\") || (ServiceType == \"AVATAR\")) {\n             console.log(\">>>>>>>>>> [ServiceUrl] : \" + ServiceUrl);\n             console.log(\">>>>>>>>>> [authorization] : \" + authorization);\n             console.log(\">>>>>>>>>> [req.body] : \" + JSON.stringify(req.body));\n \n"
                }
            ],
            "date": 1649995788856,
            "name": "Commit-0",
            "content": "var express = require('express'),\n    request = require('request'),\n    bodyParser = require('body-parser'),\n    app = express();\n\nvar myLimit = typeof (process.argv[2]) != 'undefined' ? process.argv[2] : '100kb';\nconsole.log('Using limit: ', myLimit);\n\napp.use(bodyParser.json({ limit: myLimit }));\n\napp.all('*', function (req, res, next) {\n\n    // Set CORS headers: allow all origins, methods, and headers: you may want to lock this down in a production environment\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Methods\", \"GET, PUT, PATCH, POST, DELETE\");\n    res.header(\"Access-Control-Allow-Headers\", req.header('access-control-request-headers'));\n\n    if (req.method === 'OPTIONS') {\n        // CORS Preflight\n        res.send();\n    } else {\n        var targetURL = req.header('Target-URL'); // Target-URL ie. https://example.com or http://example.com\n        if (!targetURL) {\n            res.send(500, { error: 'There is no Target-Endpoint header in the request' });\n            return;\n        }\n        request({ url: targetURL + req.url, method: req.method, json: req.body, headers: { 'Authorization': req.header('Authorization') } },\n            function (error, response, body) {\n                if (error) {\n                    console.error('error: ' + response.statusCode)\n                }\n                //                console.log(body);\n            }).pipe(res);\n    }\n});\n\napp.set('port', process.env.PORT || 3000);\n\napp.listen(app.get('port'), function () {\n    console.log('Proxy server listening on port ' + app.get('port'));\n});"
        }
    ]
}